<!DOCTYPE html><html lang="en" class="relative bg-fontdefault dark:bg-bgdefault"> <head><meta name="generator" content="Astro"><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v5.16.6"><!-- Font preloads --><link rel="preload" href="/fonts/geist-variable.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/fonts/geist-mono-variable.woff2" as="font" type="font/woff2" crossorigin><!-- Canonical URL --><link rel="canonical" href="https://z-index.me/posts/audio-diy-style/"><!-- Primary Meta Tags --><title>关于 Audio 自定义样式</title><meta name="title" content="关于 Audio 自定义样式"><meta name="description" content="菜还是那道菜，料不一样了"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://z-index.me/posts/audio-diy-style/"><meta property="og:title" content="关于 Audio 自定义样式"><meta property="og:description" content="菜还是那道菜，料不一样了"><meta property="og:image" content="https://z-index.me/static/ogimage.png"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://z-index.me/posts/audio-diy-style/"><meta property="twitter:title" content="关于 Audio 自定义样式"><meta property="twitter:description" content="菜还是那道菜，料不一样了"><meta property="twitter:image" content="https://z-index.me/static/ogimage.png"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/twikoo@1.6.44/dist/twikoo.css" crossorigin="anonymous"><link rel="stylesheet" href="/_astro/index.wYwjb_5q.css">
<style>.toc-root[data-astro-cid-6t6zfk7k] .toc-inline[data-astro-cid-6t6zfk7k]{display:block}.toc-root[data-astro-cid-6t6zfk7k] .toc-float[data-astro-cid-6t6zfk7k]{display:none}@media(min-width:1200px){.toc-root[data-astro-cid-6t6zfk7k] .toc-inline[data-astro-cid-6t6zfk7k]{display:none}.toc-root[data-astro-cid-6t6zfk7k] .toc-float[data-astro-cid-6t6zfk7k]{display:block}}.toc-root[data-astro-cid-6t6zfk7k] .toc[data-astro-cid-6t6zfk7k] details[data-astro-cid-6t6zfk7k]{padding:1rem;border-radius:10px;border:1px solid #83838330;margin-bottom:1rem}.toc-root[data-astro-cid-6t6zfk7k] .toc-float[data-astro-cid-6t6zfk7k]{position:fixed;top:84px;right:max(12px,env(safe-area-inset-right));width:260px;max-height:78vh;overflow:auto;z-index:40;transition:opacity .25s ease,transform .25s ease}.toc-root[data-astro-cid-6t6zfk7k] .toc-float[data-astro-cid-6t6zfk7k].at-top{opacity:0;pointer-events:none;transform:translateY(-4px)}.toc-root[data-astro-cid-6t6zfk7k] .toc[data-astro-cid-6t6zfk7k] a[data-astro-cid-6t6zfk7k].toc-link{position:relative;display:block;padding:.125rem 0;color:#6b7280;text-decoration:none;transition:color .15s ease}.dark[data-astro-cid-6t6zfk7k] .toc-root[data-astro-cid-6t6zfk7k] .toc[data-astro-cid-6t6zfk7k] a[data-astro-cid-6t6zfk7k].toc-link{color:#a1a1aa}.toc-root[data-astro-cid-6t6zfk7k] .toc[data-astro-cid-6t6zfk7k] a[data-astro-cid-6t6zfk7k].toc-link:hover{color:#3f3f46}.dark[data-astro-cid-6t6zfk7k] .toc-root[data-astro-cid-6t6zfk7k] .toc[data-astro-cid-6t6zfk7k] a[data-astro-cid-6t6zfk7k].toc-link:hover{color:#e4e4e7}.toc-root[data-astro-cid-6t6zfk7k] .toc[data-astro-cid-6t6zfk7k] a[data-astro-cid-6t6zfk7k].toc-link.is-active:before{content:"";position:absolute;left:-12px;top:.6em;width:5px;height:5px;border-radius:50%;background:currentColor}.toc-root[data-astro-cid-6t6zfk7k] .toc[data-astro-cid-6t6zfk7k] a[data-astro-cid-6t6zfk7k][data-depth="1"]{font-weight:600}.toc-root[data-astro-cid-6t6zfk7k] .toc[data-astro-cid-6t6zfk7k] a[data-astro-cid-6t6zfk7k][data-depth="3"],.toc-root[data-astro-cid-6t6zfk7k] .toc[data-astro-cid-6t6zfk7k] a[data-astro-cid-6t6zfk7k][data-depth="4"],.toc-root[data-astro-cid-6t6zfk7k] .toc[data-astro-cid-6t6zfk7k] a[data-astro-cid-6t6zfk7k][data-depth="5"]{opacity:.8;font-size:.9em}.toc-root[data-astro-cid-6t6zfk7k] .toc-float[data-astro-cid-6t6zfk7k] .toc[data-astro-cid-6t6zfk7k] details[data-astro-cid-6t6zfk7k]{padding:.75rem;border:1px solid rgba(0,0,0,.08);background-color:#00000008}.dark[data-astro-cid-6t6zfk7k] .toc-root[data-astro-cid-6t6zfk7k] .toc-float[data-astro-cid-6t6zfk7k] .toc[data-astro-cid-6t6zfk7k] details[data-astro-cid-6t6zfk7k]{border-color:#ffffff14;background-color:#ffffff0a}article[data-pagefind-body] :is(h1[id],h2[id],h3[id],h4[id],h5[id]){scroll-margin-top:96px}article[data-pagefind-body] img{cursor:pointer}article[data-pagefind-body] img{transition:transform .18s ease,filter .18s ease;transform-origin:center center;will-change:transform;backface-visibility:hidden}article[data-pagefind-body] img:hover{transform:scale(1.01)}.lightbox-img:hover{transform:none!important}@media(prefers-reduced-motion:reduce){article[data-pagefind-body] img{transition:none}}.lightbox-overlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:#0009;cursor:zoom-out;z-index:1000;opacity:0;touch-action:none;-webkit-tap-highlight-color:transparent}.dark .lightbox-overlay{background:#000000b3}.lightbox-img{max-width:92vw;max-height:92vh;border-radius:12px;box-shadow:0 10px 40px #0006;will-change:transform}.dark .lightbox-img{box-shadow:0 10px 40px #000000b3}@media(prefers-reduced-motion:reduce){.lightbox-overlay,.lightbox-img{animation:none !重要;transition:none !重要}}.expressive-code .frame{all:unset;position:relative;display:block;--header-border-radius: calc(var(--ec-brdRad) + var(--ec-brdWd));--tab-border-radius: calc(var(--ec-frm-edTabBrdRad) + var(--ec-brdWd));--button-spacing: .4rem;--code-background: var(--ec-frm-edBg);border-radius:var(--header-border-radius);box-shadow:0 0 0 var(--ec-brdWd) var(--ec-frm-edBrdClr)!important}
</style></head> <body class="font-sans min-h-svh text-zinc-900 bg-fontdefault antialiased transition-colors dark:bg-bgdefault dark:text-fontdefault"> <div class="mx-auto p-4 pb-16 max-w-3xl"> <header class="sticky top-0 z-50 w-full mb-6
         bg-fontdefault dark:bg-bgdefault transition-colors" data-astro-cid-3ef6ksr2> <!-- 仅内容限宽；背景全屏铺开 --> <div class="mx-auto w-full max-w-screen-md
              flex h-12 items-center justify-between" data-astro-cid-3ef6ksr2>  <nav class="hidden md:flex items-center gap-4" data-astro-cid-3ef6ksr2> <a href="/" data-astro-cid-3ef6ksr2>Home</a> <a href="/posts" data-astro-cid-3ef6ksr2>Posts</a> <a href="/library" data-astro-cid-3ef6ksr2>Library</a> <!-- <a href="/bmmg">Media</a> --> <!-- <a href="https://exercise.asyncx.top" target="_blank" rel="noopener noreferrer">Steps</a> --> </nav>  <div class="hidden md:block" data-astro-cid-3ef6ksr2> <div class="flex justify-end space-x-2"> <button id="search" class="inline-flex items-center rounded-md border p-1 transition-colors hover:bg-zinc-50 dark:border-zinc-700 dark:hover:bg-zinc-800 [&_svg]:text-zinc-500 [&_svg]:hover:text-zinc-900 [&_svg]:dark:hover:text-zinc-100" aria-label="Search" onclick="window.location.href='/search'" data-umami-event="Button-Search" type="button"> <span class="sr-only">Search</span> <svg class="size-4" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"> <g transform="scale(0.015625)"> <path d="M975.474921 917.123519l-152.442347-152.502577c150.575215-165.512276 146.419339-421.550372-13.431309-581.40102a421.610602 421.610602 0 0 0-596.217622 596.277851c138.890578 138.890578 350.47887 160.151799 512.136422 64.626882l161.47686 161.537091a62.518829 62.518829 0 1 0 88.477996-88.538227z m-251.038998-222.851318a301.15043 301.15043 0 0 1-425.886938 0 301.15043 301.15043 0 0 1 0-425.886938 301.15043 301.15043 0 1 1 425.886938 425.886938z" fill="currentColor"></path> </g> </svg> </button> <button id="rss" class="inline-flex items-center rounded-md border p-1 transition-colors hover:bg-zinc-50 dark:border-zinc-700 dark:hover:bg-zinc-800 [&_svg]:text-zinc-500 [&_svg]:hover:text-zinc-900 [&_svg]:dark:hover:text-zinc-100" aria-label="RSS Feed" onclick="window.location.href='/rss.xml'" data-umami-event="Button-RSS" type="button"> <span class="sr-only">RSS Feed</span> <svg class="size-4" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"> <g transform="scale(0.015625)"> <path d="M42.666667 853.333333a128 128 0 1 1 256 0 128 128 0 0 1-256 0z m938.666666 128h-178.773333c0-418.986667-340.906667-759.893333-759.893333-759.893333V42.666667c517.546667 0 938.666667 421.12 938.666666 938.666666z m-298.666666 0h-182.826667c0-252.074667-205.098667-457.130667-457.173333-457.130666V341.333333c352.896 0 640 287.104 640 640z" fill="currentColor"></path> </g> </svg> </button> <button id="douban" class="inline-flex items-center rounded-md border p-1 transition-colors hover:bg-zinc-50 dark:border-zinc-700 dark:hover:bg-zinc-800 [&_svg]:text-zinc-500 [&_svg]:hover:text-zinc-900 [&_svg]:dark:hover:text-zinc-100" aria-label="Douban" onclick="window.open('https://douban.com/people/141874159/', '_blank')" data-umami-event="Button-Douban" type="button"> <span class="sr-only">Douban</span> <svg class="size-4" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" fill="currentColor"> <path d="M.51 3.06h22.98V.755H.51V3.06Zm20.976 2.537v9.608h-2.137l-1.669 5.76H24v2.28H0v-2.28h6.32l-1.67-5.76H2.515V5.597h18.972Zm-5.066 9.608H7.58l1.67 5.76h5.501l1.67-5.76ZM18.367 7.9H5.634v5.025h12.733V7.9Z"></path> </svg> </button> <button id="github" class="inline-flex items-center rounded-md border p-1 transition-colors hover:bg-zinc-50 dark:border-zinc-700 dark:hover:bg-zinc-800 [&_svg]:text-zinc-500 [&_svg]:hover:text-zinc-900 [&_svg]:dark:hover:text-zinc-100" aria-label="GitHub" onclick="window.open('https://github.com/ZindexYG/z-index.me', '_blank')" data-umami-event="Button-GitHub" type="button"> <span class="sr-only">GitHub</span> <svg class="size-4" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" fill="currentColor"> <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path> </svg> </button> <button id="theme-toggle" class="inline-flex items-center rounded-md border p-1 transition-colors hover:bg-zinc-50 dark:border-zinc-700 dark:hover:bg-zinc-800 [&_svg]:text-zinc-500 [&_svg]:hover:text-zinc-900 [&_svg]:dark:hover:text-zinc-100" aria-label="Toggle theme" data-umami-event="Button-Theme" type="button"> <span class="sr-only">Toggle theme</span> <svg id="sun" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="hidden size-4 dark:block"> <path d="M8 1a.75.75 0 0 1 .75.75v1.5a.75.75 0 0 1-1.5 0v-1.5A.75.75 0 0 1 8 1ZM10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0ZM12.95 4.11a.75.75 0 1 0-1.06-1.06l-1.062 1.06a.75.75 0 0 0 1.061 1.062l1.06-1.061ZM15 8a.75.75 0 0 1-.75.75h-1.5a.75.75 0 0 1 0-1.5h1.5A.75.75 0 0 1 15 8ZM11.89 12.95a.75.75 0 0 0 1.06-1.06l-1.06-1.062a.75.75 0 0 0-1.062 1.061l1.061 1.06ZM8 12a.75.75 0 0 1 .75.75v1.5a.75.75 0 0 1-1.5 0v-1.5A.75.75 0 0 1 8 12ZM5.172 11.89a.75.75 0 0 0-1.061-1.062L3.05 11.89a.75.75 0 1 0 1.06 1.06l1.06-1.06ZM4 8a.75.75 0 0 1-.75.75h-1.5a.75.75 0 0 1 0-1.5h1.5A.75.75 0 0 1 4 8ZM4.11 5.172A.75.75 0 0 0 5.173 4.11L4.11 3.05a.75.75 0 1 0-1.06 1.06l1.06 1.06Z"></path> </svg> <svg id="moon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4 dark:hidden"> <path d="M14.438 10.148c.19-.425-.321-.787-.748-.601A5.5 5.5 0 0 1 6.453 2.31c.186-.427-.176-.938-.6-.748a6.501 6.501 0 1 0 8.585 8.586Z"></path> </svg> </button> </div> <script type="module">function t(){document.getElementById("theme-toggle")?.addEventListener("click",()=>{document.documentElement.classList.toggle("dark")})}t();document.addEventListener("astro:after-swap",t);</script> </div>  <div class="md:hidden flex items-center gap-2" data-astro-cid-3ef6ksr2> <details class="relative" data-astro-cid-3ef6ksr2> <summary class="list-none cursor-pointer p-2 rounded-md
                 hover:bg-zinc-100 dark:hover:bg-zinc-800
                 outline-none focus-visible:ring-2
                 focus-visible:ring-zinc-400 dark:focus-visible:ring-zinc-600" aria-label="Open menu" data-astro-cid-3ef6ksr2> <!-- 汉堡图标 --> <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-astro-cid-3ef6ksr2> <path stroke-linecap="round" stroke-linejoin="round" d="M4 7h16M4 12h16M4 17h16" data-astro-cid-3ef6ksr2></path> </svg> </summary> <!-- 下拉菜单背景也跟随站点配色 --> <nav class="absolute top-0 left-[calc(100%+0.5rem)] z-50
                  w-56 max-w-[80vw]
                  rounded-lg border border-zinc-200 dark:border-zinc-800
                  bg-fontdefault dark:bg-bgdefault shadow-lg" data-astro-cid-3ef6ksr2> <ul class="py-1" data-astro-cid-3ef6ksr2> <li data-astro-cid-3ef6ksr2> <a class="block px-3 py-2 rounded hover:bg-zinc-100 dark:hover:bg-zinc-800" href="/" data-astro-cid-3ef6ksr2>Home</a> </li> <li data-astro-cid-3ef6ksr2> <a class="block px-3 py-2 rounded hover:bg-zinc-100 dark:hover:bg-zinc-800" href="/posts" data-astro-cid-3ef6ksr2>Posts</a> </li> <!-- <li>
              <a
                class='block px-3 py-2 rounded hover:bg-zinc-100 dark:hover:bg-zinc-800'
                href='/tags'>Tag</a
              >
            </li> --> <!-- <li>
              <a
                class='block px-3 py-2 rounded hover:bg-zinc-100 dark:hover:bg-zinc-800'
                href='/bmmg'>Media</a
              >
            </li> --> <!-- <li>
              <a
                class='block px-3 py-2 rounded hover:bg-zinc-100 dark:hover:bg-zinc-800'
                href='https://exercise.asyncx.top'
                target='_blank'
                rel='noopener noreferrer'>Steps</a
              >
            </li> --> <!-- <li>
              <a
                class='block px-3 py-2 rounded hover:bg-zinc-100 dark:hover:bg-zinc-800'
                href='/about'>README.md</a
              >
            </li> --> </ul> </nav> </details> <div class="flex justify-end space-x-2"> <button id="search" class="inline-flex items-center rounded-md border p-1 transition-colors hover:bg-zinc-50 dark:border-zinc-700 dark:hover:bg-zinc-800 [&_svg]:text-zinc-500 [&_svg]:hover:text-zinc-900 [&_svg]:dark:hover:text-zinc-100" aria-label="Search" onclick="window.location.href='/search'" data-umami-event="Button-Search" type="button"> <span class="sr-only">Search</span> <svg class="size-4" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"> <g transform="scale(0.015625)"> <path d="M975.474921 917.123519l-152.442347-152.502577c150.575215-165.512276 146.419339-421.550372-13.431309-581.40102a421.610602 421.610602 0 0 0-596.217622 596.277851c138.890578 138.890578 350.47887 160.151799 512.136422 64.626882l161.47686 161.537091a62.518829 62.518829 0 1 0 88.477996-88.538227z m-251.038998-222.851318a301.15043 301.15043 0 0 1-425.886938 0 301.15043 301.15043 0 0 1 0-425.886938 301.15043 301.15043 0 1 1 425.886938 425.886938z" fill="currentColor"></path> </g> </svg> </button> <button id="rss" class="inline-flex items-center rounded-md border p-1 transition-colors hover:bg-zinc-50 dark:border-zinc-700 dark:hover:bg-zinc-800 [&_svg]:text-zinc-500 [&_svg]:hover:text-zinc-900 [&_svg]:dark:hover:text-zinc-100" aria-label="RSS Feed" onclick="window.location.href='/rss.xml'" data-umami-event="Button-RSS" type="button"> <span class="sr-only">RSS Feed</span> <svg class="size-4" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"> <g transform="scale(0.015625)"> <path d="M42.666667 853.333333a128 128 0 1 1 256 0 128 128 0 0 1-256 0z m938.666666 128h-178.773333c0-418.986667-340.906667-759.893333-759.893333-759.893333V42.666667c517.546667 0 938.666667 421.12 938.666666 938.666666z m-298.666666 0h-182.826667c0-252.074667-205.098667-457.130667-457.173333-457.130666V341.333333c352.896 0 640 287.104 640 640z" fill="currentColor"></path> </g> </svg> </button> <button id="douban" class="inline-flex items-center rounded-md border p-1 transition-colors hover:bg-zinc-50 dark:border-zinc-700 dark:hover:bg-zinc-800 [&_svg]:text-zinc-500 [&_svg]:hover:text-zinc-900 [&_svg]:dark:hover:text-zinc-100" aria-label="Douban" onclick="window.open('https://douban.com/people/141874159/', '_blank')" data-umami-event="Button-Douban" type="button"> <span class="sr-only">Douban</span> <svg class="size-4" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" fill="currentColor"> <path d="M.51 3.06h22.98V.755H.51V3.06Zm20.976 2.537v9.608h-2.137l-1.669 5.76H24v2.28H0v-2.28h6.32l-1.67-5.76H2.515V5.597h18.972Zm-5.066 9.608H7.58l1.67 5.76h5.501l1.67-5.76ZM18.367 7.9H5.634v5.025h12.733V7.9Z"></path> </svg> </button> <button id="github" class="inline-flex items-center rounded-md border p-1 transition-colors hover:bg-zinc-50 dark:border-zinc-700 dark:hover:bg-zinc-800 [&_svg]:text-zinc-500 [&_svg]:hover:text-zinc-900 [&_svg]:dark:hover:text-zinc-100" aria-label="GitHub" onclick="window.open('https://github.com/ZindexYG/z-index.me', '_blank')" data-umami-event="Button-GitHub" type="button"> <span class="sr-only">GitHub</span> <svg class="size-4" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" fill="currentColor"> <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path> </svg> </button> <button id="theme-toggle" class="inline-flex items-center rounded-md border p-1 transition-colors hover:bg-zinc-50 dark:border-zinc-700 dark:hover:bg-zinc-800 [&_svg]:text-zinc-500 [&_svg]:hover:text-zinc-900 [&_svg]:dark:hover:text-zinc-100" aria-label="Toggle theme" data-umami-event="Button-Theme" type="button"> <span class="sr-only">Toggle theme</span> <svg id="sun" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="hidden size-4 dark:block"> <path d="M8 1a.75.75 0 0 1 .75.75v1.5a.75.75 0 0 1-1.5 0v-1.5A.75.75 0 0 1 8 1ZM10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0ZM12.95 4.11a.75.75 0 1 0-1.06-1.06l-1.062 1.06a.75.75 0 0 0 1.061 1.062l1.06-1.061ZM15 8a.75.75 0 0 1-.75.75h-1.5a.75.75 0 0 1 0-1.5h1.5A.75.75 0 0 1 15 8ZM11.89 12.95a.75.75 0 0 0 1.06-1.06l-1.06-1.062a.75.75 0 0 0-1.062 1.061l1.061 1.06ZM8 12a.75.75 0 0 1 .75.75v1.5a.75.75 0 0 1-1.5 0v-1.5A.75.75 0 0 1 8 12ZM5.172 11.89a.75.75 0 0 0-1.061-1.062L3.05 11.89a.75.75 0 1 0 1.06 1.06l1.06-1.06ZM4 8a.75.75 0 0 1-.75.75h-1.5a.75.75 0 0 1 0-1.5h1.5A.75.75 0 0 1 4 8ZM4.11 5.172A.75.75 0 0 0 5.173 4.11L4.11 3.05a.75.75 0 1 0-1.06 1.06l1.06 1.06Z"></path> </svg> <svg id="moon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4 dark:hidden"> <path d="M14.438 10.148c.19-.425-.321-.787-.748-.601A5.5 5.5 0 0 1 6.453 2.31c.186-.427-.176-.938-.6-.748a6.501 6.501 0 1 0 8.585 8.586Z"></path> </svg> </button> </div>  </div> </div> </header>   <main> <div class="mb-5 flex items-center justify-between"> <h1 class="text-xl font-heading font-bold text-zinc-900 dark:text-zinc-100"> 关于 Audio 自定义样式 </h1> <p class="ml-4 text-sm font-medium text-zinc-500"> 2021-03-05 </p> </div>  <div class="mb-5" data-pagefind-ignore="all"> <ul class="flex flex-wrap gap-2"> <li> <a href="/tags/javascript/" class="group flex justify-between gap-3 rounded px-2 py-1 text-sm bg-bgdefault text-fontdefault dark:bg-fontdefault dark:text-bgdefault">
# javascript </a> </li><li> <a href="/tags/react/" class="group flex justify-between gap-3 rounded px-2 py-1 text-sm bg-bgdefault text-fontdefault dark:bg-fontdefault dark:text-bgdefault">
# react </a> </li><li> <a href="/tags/css/" class="group flex justify-between gap-3 rounded px-2 py-1 text-sm bg-bgdefault text-fontdefault dark:bg-fontdefault dark:text-bgdefault">
# css </a> </li> </ul> </div>  <div class="toc-root" data-astro-cid-6t6zfk7k><nav class="toc toc-inline" aria-label="Table Of Contents" data-astro-cid-6t6zfk7k><details open data-astro-cid-6t6zfk7k><summary class="text-sm font-semibold" data-astro-cid-6t6zfk7k>Table of Contents</summary><div class="mt-4 ml-4" data-astro-cid-6t6zfk7k>
    <ul class="space-y-1 pl-4">
      
        <li class="text-sm leading-tight">
          <a href="#前置" class="toc-link toc-h3" data-depth="3">
            前置
          </a>
          
        </li>
      
        <li class="text-sm leading-tight">
          <a href="#关于-css-来设置-audio-样式" class="toc-link toc-h3" data-depth="3">
            关于 css 来设置 audio 样式
          </a>
          
        </li>
      
        <li class="text-sm leading-tight">
          <a href="#关于-javascript-来设置-audio-样式" class="toc-link toc-h3" data-depth="3">
            关于 JavaScript 来设置 audio 样式
          </a>
          
        </li>
      
        <li class="text-sm leading-tight">
          <a href="#关于-react-写一个自定义的-audio-组件" class="toc-link toc-h3" data-depth="3">
            关于 React 写一个自定义的 Audio 组件
          </a>
          
        </li>
      
        <li class="text-sm leading-tight">
          <a href="#总结" class="toc-link toc-h3" data-depth="3">
            总结
          </a>
          
        </li>
      
    </ul>
  </div></details></nav><aside class="toc-float" data-astro-cid-6t6zfk7k><nav class="toc" aria-label="Table Of Contents" data-astro-cid-6t6zfk7k><details open data-astro-cid-6t6zfk7k><summary class="text-sm font-semibold" data-astro-cid-6t6zfk7k>Table of Contents</summary><div class="mt-2" data-astro-cid-6t6zfk7k>
    <ul class="space-y-1 pl-4">
      
        <li class="text-sm leading-tight">
          <a href="#前置" class="toc-link toc-h3" data-depth="3">
            前置
          </a>
          
        </li>
      
        <li class="text-sm leading-tight">
          <a href="#关于-css-来设置-audio-样式" class="toc-link toc-h3" data-depth="3">
            关于 css 来设置 audio 样式
          </a>
          
        </li>
      
        <li class="text-sm leading-tight">
          <a href="#关于-javascript-来设置-audio-样式" class="toc-link toc-h3" data-depth="3">
            关于 JavaScript 来设置 audio 样式
          </a>
          
        </li>
      
        <li class="text-sm leading-tight">
          <a href="#关于-react-写一个自定义的-audio-组件" class="toc-link toc-h3" data-depth="3">
            关于 React 写一个自定义的 Audio 组件
          </a>
          
        </li>
      
        <li class="text-sm leading-tight">
          <a href="#总结" class="toc-link toc-h3" data-depth="3">
            总结
          </a>
          
        </li>
      
    </ul>
  </div></details></nav></aside></div><script data-astro-rerun>
  ;(() => {
    const ready = fn => {
      if (document.readyState === 'loading')
        document.addEventListener('DOMContentLoaded', fn, { once: true })
      else fn()
    }

    function boot() {
      const root = document.querySelector('.toc-root')
      if (!root) return

      const float = root.querySelector('.toc-float')
      const atTop = () => window.scrollY <= 2
      const onScroll = () => {
        float?.classList.toggle('at-top', atTop())
      }
      onScroll()
      window.addEventListener('scroll', onScroll, { passive: true })

      const article = document.querySelector('article[data-pagefind-body]')
      if (!article) return

      // 更新选择器：支持 h1 到 h5
      const heads = [
        ...article.querySelectorAll('h1[id], h2[id], h3[id], h4[id], h5[id]'),
      ]
      if (!heads.length) return

      const allLinks = [...root.querySelectorAll('.toc a.toc-link')]
      const map = new Map()
      for (const a of allLinks) {
        const href = a.getAttribute('href') || ''
        if (!href.startsWith('#')) continue
        const id = href.slice(1)
        if (!map.has(id)) map.set(id, [])
        map.get(id).push(a)
      }

      let activeId = null
      const setActive = id => {
        if (activeId === id) return
        if (activeId && map.has(activeId))
          map.get(activeId).forEach(el => el.classList.remove('is-active'))
        activeId = id
        if (activeId && map.has(activeId))
          map.get(activeId).forEach(el => el.classList.add('is-active'))
      }

      const io = new IntersectionObserver(
        entries => {
          const visible = entries
            .filter(e => e.isIntersecting)
            .sort((a, b) => a.boundingClientRect.top - b.boundingClientRect.top)
          if (visible.length) {
            setActive(visible[0].target.id)
          } else {
            const nearest = heads
              .map(h => ({
                id: h.id,
                top: Math.abs(h.getBoundingClientRect().top),
              }))
              .sort((a, b) => a.top - b.top)[0]
            if (nearest) setActive(nearest.id)
          }
        },
        { root: null, threshold: [0, 1], rootMargin: '-96px 0px -60% 0px' },
      )

      heads.forEach(h => io.observe(h))

      const onClick = e => {
        const a = e.target.closest('.toc a.toc-link')
        if (!a) return
        const href = a.getAttribute('href') || ''
        if (!href.startsWith('#')) return
        const id = href.slice(1)
        const el = document.getElementById(id)
        if (!el) return
        e.preventDefault()
        el.scrollIntoView({ behavior: 'smooth', block: 'start' })
      }
      root.addEventListener('click', onClick)

      const cleanup = () => {
        window.removeEventListener('scroll', onScroll)
        io.disconnect()
        root.removeEventListener('click', onClick)
      }
      document.addEventListener('astro:before-swap', cleanup, { once: true })
    }

    ready(boot)
    document.addEventListener('astro:page-load', boot)
  })()
</script> <article data-pagefind-body> <img src="/posts/Audio_Diy_Style.png" alt="">
<blockquote>
<p>菜还是那道菜，料不一样了</p>
</blockquote>
<!-- more -->
<ul>
<li>前置</li>
<li>关于 css 来设置 audio 样式</li>
<li>关于 JavaScript 来设置样式</li>
<li>关于 React 写一个自定义的 Audio 组件</li>
<li>总结</li>
</ul>
<h3 id="前置">前置</h3>
<ul>
<li>大致了解 audio <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/audio#%E5%B1%9E%E6%80%A7">属性</a></li>
<li>懂一点点 CSS</li>
<li>懂一点点 JS 与 audio <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/audio#%E4%BA%8B%E4%BB%B6">事件</a></li>
<li>懂一点点 React</li>
</ul>
<h3 id="关于-css-来设置-audio-样式">关于 css 来设置 audio 样式</h3>
<p>引用 MDN 中的话 <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/audio#%E4%BD%BF%E7%94%A8_css_%E8%AE%BE%E7%BD%AE%E6%A0%B7%E5%BC%8F">使用 CSS 设置样式</a></p>
<ul>
<li>audio 元素没有自带的固有视觉样式，除非如果声明了 controls 属性，则会显示浏览器的默认控件。</li>
<li>默认控件的 display 的默认值为 inline。将该值设为 block 通常会对定位和布局有好处，除非你想将控件放在文本块或类似元素中。</li>
<li>你可以使用作用于整个控件的属性来为其设置样式。例如可用 border、border-radius、padding, margin 等等。但你不能设置音频播放器中的单个组件（如改变按钮大小、改变图标或字体等）。控件在不同的浏览器中也有所不同。</li>
<li>如果在跨浏览器中得到一致的外观和体验，你需要创建自定义控件；自定义控件可以根据你的需求任意设置样式，还可以使用 JavaScript 和 HTMLMediaElement API 来设置更多功能。</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/Audio_and_video_delivery/Video_player_styling_basics">视频播放器样式基础</a> 提供了一些有用的样式技术，这篇文章围绕 video 而写，但大部分都可以用于 audio。</li>
</ul>
<p>总上所述，关键就是在于 css 可操作性相对少，且会产生关于兼容性的问题，个人也仅作为</p>
<h3 id="关于-javascript-来设置-audio-样式">关于 JavaScript 来设置 audio 样式</h3>
<p>说是 JavaScript ，依然也需要配合到 css 里面来的（不然不好看</p>
<ol>
<li>
<p>准备一个,最简单的带有 audio 的 html，并把布置好布局</p>
</li>
<li>
<p>关键 JavaScript 代码</p>
<ul>
<li>2.1 准备参数</li>
<li>2.2 播放 &#x26;&#x26; 暂停 &#x26;&#x26; 进度更新</li>
<li>2.3 拖动进度条</li>
</ul>
</li>
<li>
<p>配合 css 食用</p>
</li>
<li>
<p>准备一个,最简单的带有 audio 的 html，并把布置好布局</p>
</li>
</ol>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.c86xd.css"><script type="module" src="/_astro/ec.0vx5m.js"></script><figure class="frame"><figcaption class="header"></figcaption><pre data-language="html"><code><div class="ec-line"><div class="code"><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;!</span><span style="--0:#FB6A9E;--1:#FF79C6">DOCTYPE</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">html</span><span style="--0:#D5CED9;--1:#F8F8F2">></span></div></div><div class="ec-line"><div class="code"><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;</span><span style="--0:#FB6A9E;--1:#FF79C6">html</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">lang</span><span style="--0:#D5CED9;--1:#FF79C6">=</span><span style="--0:#96E072;--1:#E9F284">"</span><span style="--0:#96E072;--1:#F1FA8C">en</span><span style="--0:#96E072;--1:#E9F284">"</span><span style="--0:#D5CED9;--1:#F8F8F2">></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">  </span></span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;</span><span style="--0:#FB6A9E;--1:#FF79C6">head</span><span style="--0:#D5CED9;--1:#F8F8F2">></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">    </span></span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;</span><span style="--0:#FB6A9E;--1:#FF79C6">meta</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">charset</span><span style="--0:#D5CED9;--1:#FF79C6">=</span><span style="--0:#96E072;--1:#E9F284">"</span><span style="--0:#96E072;--1:#F1FA8C">utf-8</span><span style="--0:#96E072;--1:#E9F284">"</span><span style="--0:#D5CED9;--1:#F8F8F2"> /></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">    </span></span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;</span><span style="--0:#FB6A9E;--1:#FF79C6">title</span><span style="--0:#D5CED9;--1:#F8F8F2">>Audio DIY&#x3C;/</span><span style="--0:#FB6A9E;--1:#FF79C6">title</span><span style="--0:#D5CED9;--1:#F8F8F2">></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">    </span></span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;</span><span style="--0:#FB6A9E;--1:#FF79C6">link</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">rel</span><span style="--0:#D5CED9;--1:#FF79C6">=</span><span style="--0:#96E072;--1:#E9F284">"</span><span style="--0:#96E072;--1:#F1FA8C">stylesheet</span><span style="--0:#96E072;--1:#E9F284">"</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">type</span><span style="--0:#D5CED9;--1:#FF79C6">=</span><span style="--0:#96E072;--1:#E9F284">"</span><span style="--0:#96E072;--1:#F1FA8C">text/css</span><span style="--0:#96E072;--1:#E9F284">"</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">href</span><span style="--0:#D5CED9;--1:#FF79C6">=</span><span style="--0:#96E072;--1:#E9F284">"</span><span style="--0:#96E072;--1:#F1FA8C">./style.css</span><span style="--0:#96E072;--1:#E9F284">"</span><span style="--0:#D5CED9;--1:#F8F8F2"> /></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">  </span></span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;/</span><span style="--0:#FB6A9E;--1:#FF79C6">head</span><span style="--0:#D5CED9;--1:#F8F8F2">></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">  </span></span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;</span><span style="--0:#FB6A9E;--1:#FF79C6">body</span><span style="--0:#D5CED9;--1:#F8F8F2">></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">    </span></span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;</span><span style="--0:#FB6A9E;--1:#FF79C6">audio</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">id</span><span style="--0:#D5CED9;--1:#FF79C6">=</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">audio</span><span style="--0:#96E072;--1:#E9F284">'</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">src</span><span style="--0:#D5CED9;--1:#FF79C6">=</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">https://interactive-examples.mdn.mozilla.net/media/cc0-audio/t-rex-roar.mp3</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#FF7777;--1fs:italic;--1td:underline">'</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">preload</span><span style="--0:#D5CED9;--1:#FF79C6">=</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">metadata</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2"> >&#x3C;/</span><span style="--0:#FB6A9E;--1:#FF79C6">audio</span><span style="--0:#D5CED9;--1:#F8F8F2">></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">    </span></span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;</span><span style="--0:#FB6A9E;--1:#FF79C6">div</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">class</span><span style="--0:#D5CED9;--1:#FF79C6">=</span><span style="--0:#96E072;--1:#E9F284">"</span><span style="--0:#96E072;--1:#F1FA8C">audio-container</span><span style="--0:#96E072;--1:#E9F284">"</span><span style="--0:#D5CED9;--1:#F8F8F2">></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">      </span></span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;</span><span style="--0:#FB6A9E;--1:#FF79C6">div</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">class</span><span style="--0:#D5CED9;--1:#FF79C6">=</span><span style="--0:#96E072;--1:#E9F284">"</span><span style="--0:#96E072;--1:#F1FA8C">audio-toggle</span><span style="--0:#96E072;--1:#E9F284">"</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">id</span><span style="--0:#D5CED9;--1:#FF79C6">=</span><span style="--0:#96E072;--1:#E9F284">"</span><span style="--0:#96E072;--1:#F1FA8C">control</span><span style="--0:#96E072;--1:#E9F284">"</span><span style="--0:#D5CED9;--1:#F8F8F2">></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">        </span></span><span style="--0:#D5CED9;--1:#F8F8F2">播放</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">      </span></span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;/</span><span style="--0:#FB6A9E;--1:#FF79C6">div</span><span style="--0:#D5CED9;--1:#F8F8F2">></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">      </span></span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;</span><span style="--0:#FB6A9E;--1:#FF79C6">div</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">class</span><span style="--0:#D5CED9;--1:#FF79C6">=</span><span style="--0:#96E072;--1:#E9F284">"</span><span style="--0:#96E072;--1:#F1FA8C">audio-progress-box</span><span style="--0:#96E072;--1:#E9F284">"</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">id</span><span style="--0:#D5CED9;--1:#FF79C6">=</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">progress</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">        </span></span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;</span><span style="--0:#FB6A9E;--1:#FF79C6">span</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">class</span><span style="--0:#D5CED9;--1:#FF79C6">=</span><span style="--0:#96E072;--1:#E9F284">"</span><span style="--0:#96E072;--1:#F1FA8C">progressDot</span><span style="--0:#96E072;--1:#E9F284">"</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">id</span><span style="--0:#D5CED9;--1:#FF79C6">=</span><span style="--0:#96E072;--1:#E9F284">"</span><span style="--0:#96E072;--1:#F1FA8C">control-dot</span><span style="--0:#96E072;--1:#E9F284">"</span><span style="--0:#D5CED9;--1:#F8F8F2">>&#x3C;/</span><span style="--0:#FB6A9E;--1:#FF79C6">span</span><span style="--0:#D5CED9;--1:#F8F8F2">></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">        </span></span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;</span><span style="--0:#FB6A9E;--1:#FF79C6">div</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">class</span><span style="--0:#D5CED9;--1:#FF79C6">=</span><span style="--0:#96E072;--1:#E9F284">"</span><span style="--0:#96E072;--1:#F1FA8C">audio-progress-bar</span><span style="--0:#96E072;--1:#E9F284">"</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">id</span><span style="--0:#D5CED9;--1:#FF79C6">=</span><span style="--0:#96E072;--1:#E9F284">"</span><span style="--0:#96E072;--1:#F1FA8C">control-progress</span><span style="--0:#96E072;--1:#E9F284">"</span><span style="--0:#D5CED9;--1:#F8F8F2">>&#x3C;/</span><span style="--0:#FB6A9E;--1:#FF79C6">div</span><span style="--0:#D5CED9;--1:#F8F8F2">></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">      </span></span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;/</span><span style="--0:#FB6A9E;--1:#FF79C6">div</span><span style="--0:#D5CED9;--1:#F8F8F2">></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">      </span></span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;</span><span style="--0:#FB6A9E;--1:#FF79C6">div</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">class</span><span style="--0:#D5CED9;--1:#FF79C6">=</span><span style="--0:#96E072;--1:#E9F284">"</span><span style="--0:#96E072;--1:#F1FA8C">audio-time</span><span style="--0:#96E072;--1:#E9F284">"</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">id</span><span style="--0:#D5CED9;--1:#FF79C6">=</span><span style="--0:#96E072;--1:#E9F284">"</span><span style="--0:#96E072;--1:#F1FA8C">‘time’</span><span style="--0:#96E072;--1:#E9F284">"</span><span style="--0:#D5CED9;--1:#F8F8F2">></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">        </span></span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;</span><span style="--0:#FB6A9E;--1:#FF79C6">span</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">id</span><span style="--0:#D5CED9;--1:#FF79C6">=</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">current</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">>00:00&#x3C;/</span><span style="--0:#FB6A9E;--1:#FF79C6">span</span><span style="--0:#D5CED9;--1:#F8F8F2">> / &#x3C;</span><span style="--0:#FB6A9E;--1:#FF79C6">span</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">id</span><span style="--0:#D5CED9;--1:#FF79C6">=</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">duration</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">>00:00&#x3C;/</span><span style="--0:#FB6A9E;--1:#FF79C6">span</span><span style="--0:#D5CED9;--1:#F8F8F2">></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">      </span></span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;/</span><span style="--0:#FB6A9E;--1:#FF79C6">div</span><span style="--0:#D5CED9;--1:#F8F8F2">></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">    </span></span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;/</span><span style="--0:#FB6A9E;--1:#FF79C6">div</span><span style="--0:#D5CED9;--1:#F8F8F2">></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">  </span></span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;/</span><span style="--0:#FB6A9E;--1:#FF79C6">body</span><span style="--0:#D5CED9;--1:#F8F8F2">></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">  </span></span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;</span><span style="--0:#FB6A9E;--1:#FF79C6">script</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">src</span><span style="--0:#D5CED9;--1:#FF79C6">=</span><span style="--0:#96E072;--1:#E9F284">"</span><span style="--0:#96E072;--1:#F1FA8C">./audio.js</span><span style="--0:#96E072;--1:#E9F284">"</span><span style="--0:#D5CED9;--1:#F8F8F2">>&#x3C;/</span><span style="--0:#FB6A9E;--1:#FF79C6">script</span><span style="--0:#D5CED9;--1:#F8F8F2">></span></div></div><div class="ec-line"><div class="code"><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;/</span><span style="--0:#FB6A9E;--1:#FF79C6">html</span><span style="--0:#D5CED9;--1:#F8F8F2">></span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="<!DOCTYPE html><html lang=&#x22;en&#x22;>  <head>    <meta charset=&#x22;utf-8&#x22; />    <title>Audio DIY</title>    <link rel=&#x22;stylesheet&#x22; type=&#x22;text/css&#x22; href=&#x22;./style.css&#x22; />  </head>  <body>    <audio      id=&#x27;audio&#x27;      src=&#x27;https://interactive-examples.mdn.mozilla.net/media/cc0-audio/t-rex-roar.mp3&#x27;&#x27;      preload=&#x27;metadata&#x27; ></audio>    <div class=&#x22;audio-container&#x22;>      <div class=&#x22;audio-toggle&#x22; id=&#x22;control&#x22;>        播放      </div>      <div class=&#x22;audio-progress-box&#x22; id=&#x27;progress&#x27;>        <span class=&#x22;progressDot&#x22; id=&#x22;control-dot&#x22;></span>        <div class=&#x22;audio-progress-bar&#x22; id=&#x22;control-progress&#x22;></div>      </div>      <div class=&#x22;audio-time&#x22; id=&#x22;‘time’&#x22;>        <span id=&#x27;current&#x27;>00:00</span> / <span id=&#x27;duration&#x27;>00:00</span>      </div>    </div>  </body>  <script src=&#x22;./audio.js&#x22;></script></html>"><div></div></button></div></figure></div>
<p>2.1 准备参数</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="javascript"><code><div class="ec-line"><div class="code"><span style="--0:#D477F1;--1:#FF79C6">const</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">Audio</span><span style="--0:#D5CED9">              </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">document</span><span style="--0:#D5CED9">.</span></span><span style="--0:#FFE66D;--1:#50FA7B">querySelector</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">#audio</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D477F1;--1:#FF79C6">const</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">contorl</span><span style="--0:#D5CED9">            </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">document</span><span style="--0:#D5CED9">.</span></span><span style="--0:#FFE66D;--1:#50FA7B">querySelector</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">#control</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D477F1;--1:#FF79C6">const</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">contorlDot</span><span style="--0:#D5CED9">         </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">document</span><span style="--0:#D5CED9">.</span></span><span style="--0:#FFE66D;--1:#50FA7B">querySelector</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">#control-dot</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D477F1;--1:#FF79C6">const</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">contorlProgress</span><span style="--0:#D5CED9">    </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">document</span><span style="--0:#D5CED9">.</span></span><span style="--0:#FFE66D;--1:#50FA7B">querySelector</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">#control-progress</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D477F1;--1:#FF79C6">const</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">contorlProgressBox</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">document</span><span style="--0:#D5CED9">.</span></span><span style="--0:#FFE66D;--1:#50FA7B">querySelector</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">#progress</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D477F1;--1:#FF79C6">const</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">current</span><span style="--0:#D5CED9">            </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">document</span><span style="--0:#D5CED9">.</span></span><span style="--0:#FFE66D;--1:#50FA7B">querySelector</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">#current</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D477F1;--1:#FF79C6">const</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">duration</span><span style="--0:#D5CED9">           </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">document</span><span style="--0:#D5CED9">.</span></span><span style="--0:#FFE66D;--1:#50FA7B">querySelector</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">#duration</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#A0A1A7F4;--1:#96A1C2">// 工具函数</span></div></div><div class="ec-line"><div class="code"><span style="--0:#A0A1A7F4;--1:#96A1C2">// 时分秒转换</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D477F1;--1:#FF79C6">function</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">transTime</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#00E8C6;--1:#FFB86C;--1fs:italic">value</span><span style="--0:#D5CED9;--1:#F8F8F2">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">var</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">time</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#96E072;--1:#E9F284">''</span><span style="--0:#D5CED9;--1:#F8F8F2">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">var</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">h</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">parseInt</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#F1FA8C">`</span><span style="--0:#FB6A9E;--1:#FF79C6">${</span><span style="--0:#00E8C6;--1:#F8F8F2">value</span><span style="--0:#D5CED9;--1:#F1FA8C"> </span><span style="--0:#F17963;--1:#FF79C6">/</span><span style="--0:#D5CED9;--1:#F1FA8C"> </span><span style="--0:#F39C12;--1:#BD93F9">3600</span><span style="--0:#FB6A9E;--1:#FF79C6">}</span><span style="--0:#96E072;--1:#F1FA8C">`</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">  </span></span><span style="--0:#00E8C6;--1:#F8F8F2">value</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">%=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F39C12;--1:#BD93F9">3600</span><span style="--0:#D5CED9;--1:#F8F8F2">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">var</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">m</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">parseInt</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#F1FA8C">`</span><span style="--0:#FB6A9E;--1:#FF79C6">${</span><span style="--0:#00E8C6;--1:#F8F8F2">value</span><span style="--0:#D5CED9;--1:#F1FA8C"> </span><span style="--0:#F17963;--1:#FF79C6">/</span><span style="--0:#D5CED9;--1:#F1FA8C"> </span><span style="--0:#F39C12;--1:#BD93F9">60</span><span style="--0:#FB6A9E;--1:#FF79C6">}</span><span style="--0:#96E072;--1:#F1FA8C">`</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">var</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">s</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">parseInt</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#F1FA8C">`</span><span style="--0:#FB6A9E;--1:#FF79C6">${</span><span style="--0:#00E8C6;--1:#F8F8F2">value</span><span style="--0:#D5CED9;--1:#F1FA8C"> </span><span style="--0:#F17963;--1:#FF79C6">%</span><span style="--0:#D5CED9;--1:#F1FA8C"> </span><span style="--0:#F39C12;--1:#BD93F9">60</span><span style="--0:#FB6A9E;--1:#FF79C6">}</span><span style="--0:#96E072;--1:#F1FA8C">`</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">if</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> (</span><span style="--0:#00E8C6">h</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">></span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F39C12;--1:#BD93F9">0</span><span style="--0:#D5CED9;--1:#F8F8F2">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">    </span></span><span style="--0:#00E8C6;--1:#F8F8F2">time</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">formatTime</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">(</span><span style="--0:#00E8C6">h</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">+</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">:</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">+</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">m</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">+</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">:</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">+</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">s</span><span style="--0:#D5CED9">);</span></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">  </span></span><span style="--0:#D5CED9;--1:#F8F8F2">} </span><span style="--0:#D477F1;--1:#FF79C6">else</span><span style="--0:#D5CED9;--1:#F8F8F2"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">    </span></span><span style="--0:#00E8C6;--1:#F8F8F2">time</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">formatTime</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">(</span><span style="--0:#00E8C6">m</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">+</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">:</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">+</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">s</span><span style="--0:#D5CED9">);</span></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">  </span></span><span style="--0:#D5CED9;--1:#F8F8F2">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">return</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">time</span><span style="--0:#D5CED9">;</span></span></div></div><div class="ec-line"><div class="code"><span style="--0:#D5CED9;--1:#F8F8F2">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#A0A1A7F4;--1:#96A1C2">// 补零</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D477F1;--1:#FF79C6">function</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">formatTime</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#00E8C6;--1:#FFB86C;--1fs:italic">value</span><span style="--0:#D5CED9;--1:#F8F8F2">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">var</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">time</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#96E072;--1:#E9F284">''</span><span style="--0:#D5CED9;--1:#F8F8F2">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">var</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">s</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">value</span><span style="--0:#D5CED9">.</span></span><span style="--0:#FFE66D;--1:#50FA7B">split</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">:</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">var</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">i</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F39C12;--1:#BD93F9">0</span><span style="--0:#D5CED9;--1:#F8F8F2">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">for</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> (; </span><span style="--0:#00E8C6">i</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">&#x3C;</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">s</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">length</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">-</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F39C12;--1:#BD93F9">1</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">; </span><span style="--0:#00E8C6">i</span></span><span style="--0:#F17963;--1:#FF79C6">++</span><span style="--0:#D5CED9;--1:#F8F8F2">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">    </span></span><span style="--0:#00E8C6;--1:#F8F8F2">time</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">+=</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">s</span><span style="--0:#D5CED9">[</span><span style="--0:#00E8C6">i</span><span style="--0:#D5CED9">].</span><span style="--0:#00E8C6">length</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">===</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F39C12;--1:#BD93F9">1</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">?</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">0</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">+</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">s</span><span style="--0:#D5CED9">[</span><span style="--0:#00E8C6">i</span><span style="--0:#D5CED9">] </span></span><span style="--0:#F17963;--1:#FF79C6">:</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">s</span><span style="--0:#D5CED9">[</span><span style="--0:#00E8C6">i</span><span style="--0:#D5CED9">];</span></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">    </span></span><span style="--0:#00E8C6;--1:#F8F8F2">time</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">+=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">:</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">  </span></span><span style="--0:#D5CED9;--1:#F8F8F2">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">  </span></span><span style="--0:#00E8C6;--1:#F8F8F2">time</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">+=</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">s</span><span style="--0:#D5CED9">[</span><span style="--0:#00E8C6">i</span><span style="--0:#D5CED9">].</span><span style="--0:#00E8C6">length</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">===</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F39C12;--1:#BD93F9">1</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">?</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">0</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">+</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">s</span><span style="--0:#D5CED9">[</span><span style="--0:#00E8C6">i</span><span style="--0:#D5CED9">] </span></span><span style="--0:#F17963;--1:#FF79C6">:</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">s</span><span style="--0:#D5CED9">[</span><span style="--0:#00E8C6">i</span><span style="--0:#D5CED9">];</span></span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">return</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">time</span><span style="--0:#D5CED9">;</span></span></div></div><div class="ec-line"><div class="code"><span style="--0:#D5CED9;--1:#F8F8F2">}</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="const Audio              = document.querySelector(&#x27;#audio&#x27;);const contorl            = document.querySelector(&#x27;#control&#x27;);const contorlDot         = document.querySelector(&#x27;#control-dot&#x27;);const contorlProgress    = document.querySelector(&#x27;#control-progress&#x27;);const contorlProgressBox = document.querySelector(&#x27;#progress&#x27;);const current            = document.querySelector(&#x27;#current&#x27;);const duration           = document.querySelector(&#x27;#duration&#x27;);// 工具函数// 时分秒转换function transTime(value) {  var time = &#x27;&#x27;;  var h = parseInt(&#x60;${value / 3600}&#x60;);  value %= 3600;  var m = parseInt(&#x60;${value / 60}&#x60;);  var s = parseInt(&#x60;${value % 60}&#x60;);  if (h > 0) {    time = formatTime(h + &#x27;:&#x27; + m + &#x27;:&#x27; + s);  } else {    time = formatTime(m + &#x27;:&#x27; + s);  }  return time;}// 补零function formatTime(value) {  var time = &#x27;&#x27;;  var s = value.split(&#x27;:&#x27;);  var i = 0;  for (; i < s.length - 1; i++) {    time += s[i].length === 1 ? &#x27;0&#x27; + s[i] : s[i];    time += &#x27;:&#x27;;  }  time += s[i].length === 1 ? &#x27;0&#x27; + s[i] : s[i];  return time;}"><div></div></button></div></figure></div>
<p>2.2 播放 &#x26;&#x26; 暂停 &#x26;&#x26; 进度更新</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="javascript"><code><div class="ec-line"><div class="code"><span style="--1:#F8F8F2"><span style="--0:#F39C12">contorl</span><span style="--0:#D5CED9">.</span></span><span style="--0:#FFE66D;--1:#50FA7B">addEventListener</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">click</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">, </span><span style="--0:#00E8C6;--1:#FFB86C;--1fs:italic">e</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#D477F1;--1:#FF79C6">=></span><span style="--0:#D5CED9;--1:#F8F8F2"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">if</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> (</span><span style="--0:#F39C12">e</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">target</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">innerText</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">===</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">播放</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">    </span></span><span style="--0:#F39C12;--1:#F8F8F2">e</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">target</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">innerText</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">暂停</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">    </span></span><span style="--0:#F39C12;--1:#F8F8F2">Audio</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#FFE66D;--1:#50FA7B">play</span><span style="--0:#D5CED9;--1:#F8F8F2">();</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">  </span></span><span style="--0:#D5CED9;--1:#F8F8F2">} </span><span style="--0:#D477F1;--1:#FF79C6">else</span><span style="--0:#D5CED9;--1:#F8F8F2"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">    </span></span><span style="--0:#F39C12;--1:#F8F8F2">e</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">target</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">innerText</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">播放</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">    </span></span><span style="--0:#F39C12;--1:#F8F8F2">Audio</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#FFE66D;--1:#50FA7B">pause</span><span style="--0:#D5CED9;--1:#F8F8F2">();</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">  </span></span><span style="--0:#D5CED9;--1:#F8F8F2">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D5CED9;--1:#F8F8F2">});</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--1:#F8F8F2"><span style="--0:#F39C12">Audio</span><span style="--0:#D5CED9">.</span></span><span style="--0:#FFE66D;--1:#50FA7B">addEventListener</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">loadedmetadata</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">, </span><span style="--0:#00E8C6;--1:#FFB86C;--1fs:italic">e</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#D477F1;--1:#FF79C6">=></span><span style="--0:#D5CED9;--1:#F8F8F2"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">  </span></span><span style="--0:#F39C12;--1:#F8F8F2">duration</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">innerText</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">transTime</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">(</span><span style="--0:#F39C12">e</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">target</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">duration</span><span style="--0:#D5CED9">);</span></span></div></div><div class="ec-line"><div class="code"><span style="--0:#D5CED9;--1:#F8F8F2">});</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--1:#F8F8F2"><span style="--0:#F39C12">Audio</span><span style="--0:#D5CED9">.</span></span><span style="--0:#FFE66D;--1:#50FA7B">addEventListener</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">timeupdate</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">, </span><span style="--0:#00E8C6;--1:#FFB86C;--1fs:italic">e</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#D477F1;--1:#FF79C6">=></span><span style="--0:#D5CED9;--1:#F8F8F2"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">let</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">value</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">e</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">target</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">currentTime</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">/</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">Audio</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">duration</span><span style="--0:#D5CED9">;</span></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">  </span></span><span style="--0:#F39C12;--1:#F8F8F2">current</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">innerText</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">transTime</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">(</span><span style="--0:#F39C12">e</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">target</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">currentTime</span><span style="--0:#D5CED9">);</span></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">  </span></span><span style="--0:#F39C12;--1:#F8F8F2">contorlProgress</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">style</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">width</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#96E072;--1:#F1FA8C">`</span><span style="--0:#FB6A9E;--1:#FF79C6">${</span><span style="--0:#00E8C6;--1:#F8F8F2">value</span><span style="--0:#D5CED9;--1:#F1FA8C"> </span><span style="--0:#F17963;--1:#FF79C6">*</span><span style="--0:#D5CED9;--1:#F1FA8C"> </span><span style="--0:#F39C12;--1:#BD93F9">100</span><span style="--0:#FB6A9E;--1:#FF79C6">}</span><span style="--0:#96E072;--1:#F1FA8C">%`</span><span style="--0:#D5CED9;--1:#F8F8F2">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">  </span></span><span style="--0:#F39C12;--1:#F8F8F2">contorlDot</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">style</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">left</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#96E072;--1:#F1FA8C">`</span><span style="--0:#FB6A9E;--1:#FF79C6">${</span><span style="--0:#00E8C6;--1:#F8F8F2">value</span><span style="--0:#D5CED9;--1:#F1FA8C"> </span><span style="--0:#F17963;--1:#FF79C6">*</span><span style="--0:#D5CED9;--1:#F1FA8C"> </span><span style="--0:#F39C12;--1:#BD93F9">100</span><span style="--0:#FB6A9E;--1:#FF79C6">}</span><span style="--0:#96E072;--1:#F1FA8C">%`</span><span style="--0:#D5CED9;--1:#F8F8F2">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D5CED9;--1:#F8F8F2">});</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--1:#F8F8F2"><span style="--0:#F39C12">Audio</span><span style="--0:#D5CED9">.</span></span><span style="--0:#FFE66D;--1:#50FA7B">addEventListener</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">ended</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">, </span><span style="--0:#00E8C6;--1:#FFB86C;--1fs:italic">e</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#D477F1;--1:#FF79C6">=></span><span style="--0:#D5CED9;--1:#F8F8F2"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">  </span></span><span style="--0:#F39C12;--1:#F8F8F2">contorlProgress</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">style</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">width</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">0%</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">  </span></span><span style="--0:#F39C12;--1:#F8F8F2">contorlDot</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">style</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">left</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">0%</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">  </span></span><span style="--0:#F39C12;--1:#F8F8F2">contorl</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">innerText</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">播放</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D5CED9;--1:#F8F8F2">});</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="contorl.addEventListener(&#x27;click&#x27;, e => {  if (e.target.innerText === &#x27;播放&#x27;) {    e.target.innerText = &#x27;暂停&#x27;;    Audio.play();  } else {    e.target.innerText = &#x27;播放&#x27;;    Audio.pause();  }});Audio.addEventListener(&#x27;loadedmetadata&#x27;, e => {  duration.innerText = transTime(e.target.duration);});Audio.addEventListener(&#x27;timeupdate&#x27;, e => {  let value = e.target.currentTime / Audio.duration;  current.innerText = transTime(e.target.currentTime);  contorlProgress.style.width = &#x60;${value * 100}%&#x60;;  contorlDot.style.left = &#x60;${value * 100}%&#x60;;});Audio.addEventListener(&#x27;ended&#x27;, e => {  contorlProgress.style.width = &#x27;0%&#x27;;  contorlDot.style.left = &#x27;0%&#x27;;  contorl.innerText = &#x27;播放&#x27;;});"><div></div></button></div></figure></div>
<p>2.3 拖动进度条</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="javascript"><code><div class="ec-line"><div class="code"><span style="--0:#A0A1A7F4;--1:#96A1C2">// 鼠标按下</span></div></div><div class="ec-line"><div class="code"><span style="--1:#F8F8F2"><span style="--0:#F39C12">contorlDot</span><span style="--0:#D5CED9">.</span></span><span style="--0:#FFE66D;--1:#50FA7B">addEventListener</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">mousedown</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">, </span><span style="--0:#00E8C6">down</span><span style="--0:#D5CED9">, </span></span><span style="--0:#F17963;--1:#BD93F9">false</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span style="--1:#F8F8F2"><span style="--0:#F39C12">contorlDot</span><span style="--0:#D5CED9">.</span></span><span style="--0:#FFE66D;--1:#50FA7B">addEventListener</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">touchstart</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">, </span><span style="--0:#00E8C6">down</span><span style="--0:#D5CED9">, </span></span><span style="--0:#F17963;--1:#BD93F9">false</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#A0A1A7F4;--1:#96A1C2">// 开始拖动</span></div></div><div class="ec-line"><div class="code"><span style="--1:#F8F8F2"><span style="--0:#F39C12">document</span><span style="--0:#D5CED9">.</span></span><span style="--0:#FFE66D;--1:#50FA7B">addEventListener</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">mousemove</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">, </span><span style="--0:#00E8C6">move</span><span style="--0:#D5CED9">, </span></span><span style="--0:#F17963;--1:#BD93F9">false</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span style="--1:#F8F8F2"><span style="--0:#F39C12">document</span><span style="--0:#D5CED9">.</span></span><span style="--0:#FFE66D;--1:#50FA7B">addEventListener</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">touchmove</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">, </span><span style="--0:#00E8C6">move</span><span style="--0:#D5CED9">, </span></span><span style="--0:#F17963;--1:#BD93F9">false</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#A0A1A7F4;--1:#96A1C2">// 拖动结束</span></div></div><div class="ec-line"><div class="code"><span style="--1:#F8F8F2"><span style="--0:#F39C12">document</span><span style="--0:#D5CED9">.</span></span><span style="--0:#FFE66D;--1:#50FA7B">addEventListener</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">mouseup</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">, </span><span style="--0:#00E8C6">end</span><span style="--0:#D5CED9">, </span></span><span style="--0:#F17963;--1:#BD93F9">false</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span style="--1:#F8F8F2"><span style="--0:#F39C12">document</span><span style="--0:#D5CED9">.</span></span><span style="--0:#FFE66D;--1:#50FA7B">addEventListener</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">touchend</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">, </span><span style="--0:#00E8C6">end</span><span style="--0:#D5CED9">, </span></span><span style="--0:#F17963;--1:#BD93F9">false</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D477F1;--1:#FF79C6">const</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">position</span><span style="--0:#D5CED9">  </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">  </span></span><span style="--0:#D5CED9;--1:#F8F8F2">oriOffestLeft </span><span style="--0:#D5CED9;--1:#FF79C6">:</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F39C12;--1:#BD93F9">0</span><span style="--0:#D5CED9;--1:#F8F8F2">, </span><span style="--0:#A0A1A7F4;--1:#96A1C2">// 移动开始时进度条的点距离进度条的偏移值</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">  </span></span><span style="--0:#D5CED9;--1:#F8F8F2">oriX          </span><span style="--0:#D5CED9;--1:#FF79C6">:</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F39C12;--1:#BD93F9">0</span><span style="--0:#D5CED9;--1:#F8F8F2">, </span><span style="--0:#A0A1A7F4;--1:#96A1C2">// 移动开始时的x坐标</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">  </span></span><span style="--0:#D5CED9;--1:#F8F8F2">maxLeft       </span><span style="--0:#D5CED9;--1:#FF79C6">:</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F39C12;--1:#BD93F9">0</span><span style="--0:#D5CED9;--1:#F8F8F2">, </span><span style="--0:#A0A1A7F4;--1:#96A1C2">// 向左最大可拖动距离</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">  </span></span><span style="--0:#D5CED9;--1:#F8F8F2">maxRight      </span><span style="--0:#D5CED9;--1:#FF79C6">:</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F39C12;--1:#BD93F9">0</span><span style="--0:#D5CED9;--1:#F8F8F2">, </span><span style="--0:#A0A1A7F4;--1:#96A1C2">// 向右最大可拖动距离</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D5CED9;--1:#F8F8F2">};</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D477F1;--1:#FF79C6">let</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">flag</span><span style="--0:#D5CED9">        </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#BD93F9">false</span><span style="--0:#D5CED9;--1:#F8F8F2">; </span><span style="--0:#A0A1A7F4;--1:#96A1C2">// 标记是否拖动开始</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D477F1;--1:#FF79C6">const</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">down</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#00E8C6;--1:#FFB86C;--1fs:italic">event</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#D477F1;--1:#FF79C6">=></span><span style="--0:#D5CED9;--1:#F8F8F2"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">if</span><span style="--0:#D5CED9;--1:#F8F8F2"> (</span><span style="--0:#F17963;--1:#FF79C6">!</span><span style="--1:#F8F8F2"><span style="--0:#F39C12">Audio</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">pause</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">||</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">Audio</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">currentTime</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">!==</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F39C12;--1:#BD93F9">0</span><span style="--0:#D5CED9;--1:#F8F8F2">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">    </span></span><span style="--0:#00E8C6;--1:#F8F8F2">flag</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#BD93F9">true</span><span style="--0:#D5CED9;--1:#F8F8F2">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">    </span></span><span style="--0:#F39C12;--1:#F8F8F2">position</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">oriOffestLeft</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">contorlDot</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">offsetLeft</span><span style="--0:#D5CED9">;</span></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">    </span></span><span style="--0:#F39C12;--1:#F8F8F2">position</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">oriX</span><span style="--0:#D5CED9;--1:#F8F8F2">          </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">event</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">touches</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">?</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">                             </span></span><span style="--0:#F39C12;--1:#F8F8F2">event</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">touches</span><span style="--0:#D5CED9;--1:#F8F8F2">[</span><span style="--0:#F39C12;--1:#BD93F9">0</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">].</span><span style="--0:#00E8C6">clientX</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">                             </span></span><span style="--0:#F39C12;--1:#F8F8F2">event</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">clientX</span><span style="--0:#D5CED9;--1:#F8F8F2">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#A0A1A7F4;--1:#96A1C2">// 要同时适配mousedown和touchstart事件</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">    </span></span><span style="--0:#F39C12;--1:#F8F8F2">position</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">maxLeft</span><span style="--0:#D5CED9;--1:#F8F8F2">       </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">position</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">oriOffestLeft</span><span style="--0:#D5CED9">;</span></span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#A0A1A7F4;--1:#96A1C2">// 向左最大可拖动距离</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">    </span></span><span style="--0:#F39C12;--1:#F8F8F2">position</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">maxRight</span><span style="--0:#D5CED9;--1:#F8F8F2">      </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">contorlProgressBox</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">offsetWidth</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">-</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">                             </span></span><span style="--0:#F39C12;--1:#F8F8F2">position</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">oriOffestLeft</span><span style="--0:#D5CED9;--1:#F8F8F2">; </span><span style="--0:#A0A1A7F4;--1:#96A1C2">// 向右边最大可拖动距离</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#D477F1;--1:#FF79C6">if</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> (</span><span style="--0:#00E8C6">event</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">&#x26;&#x26;</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">event</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">preventDefault</span><span style="--0:#D5CED9">) </span><span style="--0:#F39C12">event</span><span style="--0:#D5CED9">.</span></span><span style="--0:#FFE66D;--1:#50FA7B">preventDefault</span><span style="--0:#D5CED9;--1:#F8F8F2">();</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#D477F1;--1:#FF79C6">else</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">event</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">returnValue</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#BD93F9">false</span><span style="--0:#D5CED9;--1:#F8F8F2">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#D477F1;--1:#FF79C6">if</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> (</span><span style="--0:#00E8C6">event</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">&#x26;&#x26;</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">event</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">stopPropagation</span><span style="--0:#D5CED9">) </span><span style="--0:#F39C12">event</span><span style="--0:#D5CED9">.</span></span><span style="--0:#FFE66D;--1:#50FA7B">stopPropagation</span><span style="--0:#D5CED9;--1:#F8F8F2">();</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#D477F1;--1:#FF79C6">else</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">window</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">event</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">cancelBubble</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#BD93F9">true</span><span style="--0:#D5CED9;--1:#F8F8F2">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">  </span></span><span style="--0:#D5CED9;--1:#F8F8F2">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D5CED9;--1:#F8F8F2">};</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D477F1;--1:#FF79C6">const</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">move</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#00E8C6;--1:#FFB86C;--1fs:italic">event</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#D477F1;--1:#FF79C6">=></span><span style="--0:#D5CED9;--1:#F8F8F2"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">if</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> (</span><span style="--0:#00E8C6">flag</span><span style="--0:#D5CED9">) {</span></span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#D477F1;--1:#FF79C6">let</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">clientX</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">event</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">touches</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">?</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">event</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">touches</span><span style="--0:#D5CED9">[</span></span><span style="--0:#F39C12;--1:#BD93F9">0</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">].</span><span style="--0:#00E8C6">clientX</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">:</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">event</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">clientX</span><span style="--0:#D5CED9">;</span></span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#D477F1;--1:#FF79C6">let</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">length</span><span style="--0:#D5CED9">  </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">clientX</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">-</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">position</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">oriX</span><span style="--0:#D5CED9">;</span></span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#D477F1;--1:#FF79C6">if</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> (</span><span style="--0:#00E8C6">length</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">></span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">position</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">maxRight</span><span style="--0:#D5CED9">) {</span></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">      </span></span><span style="--0:#00E8C6;--1:#F8F8F2">length</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">position</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">maxRight</span><span style="--0:#D5CED9">;</span></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">    </span></span><span style="--0:#D5CED9;--1:#F8F8F2">} </span><span style="--0:#D477F1;--1:#FF79C6">else</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#D477F1;--1:#FF79C6">if</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> (</span><span style="--0:#00E8C6">length</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">&#x3C;</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">-</span><span style="--1:#F8F8F2"><span style="--0:#F39C12">position</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">maxLeft</span><span style="--0:#D5CED9">) {</span></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">      </span></span><span style="--0:#00E8C6;--1:#F8F8F2">length</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">-</span><span style="--1:#F8F8F2"><span style="--0:#F39C12">position</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">maxLeft</span><span style="--0:#D5CED9">;</span></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">    </span></span><span style="--0:#D5CED9;--1:#F8F8F2">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#D477F1;--1:#FF79C6">let</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">pgsWidth</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">parseFloat</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">      </span></span><span style="--0:#F39C12;--1:#F8F8F2">window</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#FFE66D;--1:#50FA7B">getComputedStyle</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">(</span><span style="--0:#00E8C6">contorlProgressBox</span><span style="--0:#D5CED9">, </span></span><span style="--0:#F17963;--1:#BD93F9">null</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">).</span><span style="--0:#00E8C6">width</span><span style="--0:#D5CED9">.</span></span><span style="--0:#FFE66D;--1:#50FA7B">replace</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">px</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">),</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">    </span></span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#D477F1;--1:#FF79C6">let</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">rate</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> (</span><span style="--0:#F39C12">position</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">oriOffestLeft</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">+</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">length</span><span style="--0:#D5CED9">) </span></span><span style="--0:#F17963;--1:#FF79C6">/</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">pgsWidth</span><span style="--0:#D5CED9">;</span></span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">    </span></span><span style="--0:#F39C12;--1:#F8F8F2">Audio</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">currentTime</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">Audio</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">duration</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">*</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">rate</span><span style="--0:#D5CED9">;</span></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">  </span></span><span style="--0:#D5CED9;--1:#F8F8F2">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D5CED9;--1:#F8F8F2">};</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D477F1;--1:#FF79C6">const</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">end</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> () </span><span style="--0:#D477F1;--1:#FF79C6">=></span><span style="--0:#D5CED9;--1:#F8F8F2"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">  </span></span><span style="--0:#00E8C6;--1:#F8F8F2">flag</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#BD93F9">false</span><span style="--0:#D5CED9;--1:#F8F8F2">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D5CED9;--1:#F8F8F2">};</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="// 鼠标按下contorlDot.addEventListener(&#x27;mousedown&#x27;, down, false);contorlDot.addEventListener(&#x27;touchstart&#x27;, down, false);// 开始拖动document.addEventListener(&#x27;mousemove&#x27;, move, false);document.addEventListener(&#x27;touchmove&#x27;, move, false);// 拖动结束document.addEventListener(&#x27;mouseup&#x27;, end, false);document.addEventListener(&#x27;touchend&#x27;, end, false);const position  = {  oriOffestLeft : 0, // 移动开始时进度条的点距离进度条的偏移值  oriX          : 0, // 移动开始时的x坐标  maxLeft       : 0, // 向左最大可拖动距离  maxRight      : 0, // 向右最大可拖动距离};let flag        = false; // 标记是否拖动开始const down = event => {  if (!Audio.pause || Audio.currentTime !== 0) {    flag = true;    position.oriOffestLeft = contorlDot.offsetLeft;    position.oriX          = event.touches ?                             event.touches[0].clientX :                             event.clientX;    // 要同时适配mousedown和touchstart事件    position.maxLeft       = position.oriOffestLeft;    // 向左最大可拖动距离    position.maxRight      = contorlProgressBox.offsetWidth -                             position.oriOffestLeft; // 向右边最大可拖动距离    if (event &#x26;&#x26; event.preventDefault) event.preventDefault();    else event.returnValue = false;    if (event &#x26;&#x26; event.stopPropagation) event.stopPropagation();    else window.event.cancelBubble = true;  }};const move = event => {  if (flag) {    let clientX = event.touches ? event.touches[0].clientX : event.clientX;    let length  = clientX - position.oriX;    if (length > position.maxRight) {      length = position.maxRight;    } else if (length < -position.maxLeft) {      length = -position.maxLeft;    }    let pgsWidth = parseFloat(      window.getComputedStyle(contorlProgressBox, null).width.replace(&#x27;px&#x27;),    );    let rate = (position.oriOffestLeft + length) / pgsWidth;    Audio.currentTime = Audio.duration * rate;  }};const end = () => {  flag = false;};"><div></div></button></div></figure></div>
<h3 id="关于-react-写一个自定义的-audio-组件">关于 React 写一个自定义的 Audio 组件</h3>
<p>框架加持会让组件更加简单，chch</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="javascript"><code><div class="ec-line"><div class="code"><span style="--0:#D477F1;--1:#FF79C6">import</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">React</span><span style="--0:#D5CED9">, {</span></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">  </span></span><span style="--0:#00E8C6;--1:#F8F8F2">useRef</span><span style="--0:#D5CED9;--1:#F8F8F2">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">  </span></span><span style="--0:#00E8C6;--1:#F8F8F2">useLayoutEffect</span><span style="--0:#D5CED9;--1:#F8F8F2">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">  </span></span><span style="--0:#00E8C6;--1:#F8F8F2">useState</span><span style="--0:#D5CED9;--1:#F8F8F2">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">  </span></span><span style="--0:#00E8C6;--1:#F8F8F2">useEffect</span><span style="--0:#D5CED9;--1:#F8F8F2">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">  </span></span><span style="--0:#00E8C6;--1:#F8F8F2">MouseEvent</span><span style="--0:#D5CED9;--1:#F8F8F2">,</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D5CED9;--1:#F8F8F2">} </span><span style="--0:#D477F1;--1:#FF79C6">from</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">react</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D477F1;--1:#FF79C6">import</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">./Audio.css</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D477F1;--1:#FF79C6">function</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">transTime</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#00E8C6;--1:#FFB86C;--1fs:italic">value</span><span style="--0:#F17963;--1:#FF79C6">:</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#D477F1;--1:#8BE9FD;--1fs:italic">number</span><span style="--0:#D5CED9;--1:#F8F8F2">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">var</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">time</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#96E072;--1:#E9F284">''</span><span style="--0:#D5CED9;--1:#F8F8F2">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">var</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">h</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">parseInt</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#F1FA8C">`</span><span style="--0:#FB6A9E;--1:#FF79C6">${</span><span style="--0:#00E8C6;--1:#F8F8F2">value</span><span style="--0:#D5CED9;--1:#F1FA8C"> </span><span style="--0:#F17963;--1:#FF79C6">/</span><span style="--0:#D5CED9;--1:#F1FA8C"> </span><span style="--0:#F39C12;--1:#BD93F9">3600</span><span style="--0:#FB6A9E;--1:#FF79C6">}</span><span style="--0:#96E072;--1:#F1FA8C">`</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">  </span></span><span style="--0:#00E8C6;--1:#F8F8F2">value</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">%=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F39C12;--1:#BD93F9">3600</span><span style="--0:#D5CED9;--1:#F8F8F2">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">var</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">m</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">parseInt</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#F1FA8C">`</span><span style="--0:#FB6A9E;--1:#FF79C6">${</span><span style="--0:#00E8C6;--1:#F8F8F2">value</span><span style="--0:#D5CED9;--1:#F1FA8C"> </span><span style="--0:#F17963;--1:#FF79C6">/</span><span style="--0:#D5CED9;--1:#F1FA8C"> </span><span style="--0:#F39C12;--1:#BD93F9">60</span><span style="--0:#FB6A9E;--1:#FF79C6">}</span><span style="--0:#96E072;--1:#F1FA8C">`</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">var</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">s</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">parseInt</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#F1FA8C">`</span><span style="--0:#FB6A9E;--1:#FF79C6">${</span><span style="--0:#00E8C6;--1:#F8F8F2">value</span><span style="--0:#D5CED9;--1:#F1FA8C"> </span><span style="--0:#F17963;--1:#FF79C6">%</span><span style="--0:#D5CED9;--1:#F1FA8C"> </span><span style="--0:#F39C12;--1:#BD93F9">60</span><span style="--0:#FB6A9E;--1:#FF79C6">}</span><span style="--0:#96E072;--1:#F1FA8C">`</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">if</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> (</span><span style="--0:#00E8C6">h</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">></span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F39C12;--1:#BD93F9">0</span><span style="--0:#D5CED9;--1:#F8F8F2">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">    </span></span><span style="--0:#00E8C6;--1:#F8F8F2">time</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">formatTime</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">(</span><span style="--0:#00E8C6">h</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">+</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">:</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">+</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">m</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">+</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">:</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">+</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">s</span><span style="--0:#D5CED9">);</span></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">  </span></span><span style="--0:#D5CED9;--1:#F8F8F2">} </span><span style="--0:#D477F1;--1:#FF79C6">else</span><span style="--0:#D5CED9;--1:#F8F8F2"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">    </span></span><span style="--0:#00E8C6;--1:#F8F8F2">time</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">formatTime</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">(</span><span style="--0:#00E8C6">m</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">+</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">:</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">+</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">s</span><span style="--0:#D5CED9">);</span></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">  </span></span><span style="--0:#D5CED9;--1:#F8F8F2">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">return</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">time</span><span style="--0:#D5CED9">;</span></span></div></div><div class="ec-line"><div class="code"><span style="--0:#D5CED9;--1:#F8F8F2">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D477F1;--1:#FF79C6">function</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">formatTime</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#00E8C6;--1:#FFB86C;--1fs:italic">value</span><span style="--0:#F17963;--1:#FF79C6">:</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#D477F1;--1:#8BE9FD;--1fs:italic">string</span><span style="--0:#D5CED9;--1:#F8F8F2">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">var</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">time</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#96E072;--1:#E9F284">''</span><span style="--0:#D5CED9;--1:#F8F8F2">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">var</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">s</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">value</span><span style="--0:#D5CED9">.</span></span><span style="--0:#FFE66D;--1:#50FA7B">split</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">:</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">var</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">i</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F39C12;--1:#BD93F9">0</span><span style="--0:#D5CED9;--1:#F8F8F2">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">for</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> (; </span><span style="--0:#00E8C6">i</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">&#x3C;</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">s</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">length</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">-</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F39C12;--1:#BD93F9">1</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">; </span><span style="--0:#00E8C6">i</span></span><span style="--0:#F17963;--1:#FF79C6">++</span><span style="--0:#D5CED9;--1:#F8F8F2">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">    </span></span><span style="--0:#00E8C6;--1:#F8F8F2">time</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">+=</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">s</span><span style="--0:#D5CED9">[</span><span style="--0:#00E8C6">i</span><span style="--0:#D5CED9">].</span><span style="--0:#00E8C6">length</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">===</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F39C12;--1:#BD93F9">1</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">?</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">0</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">+</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">s</span><span style="--0:#D5CED9">[</span><span style="--0:#00E8C6">i</span><span style="--0:#D5CED9">] </span></span><span style="--0:#F17963;--1:#FF79C6">:</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">s</span><span style="--0:#D5CED9">[</span><span style="--0:#00E8C6">i</span><span style="--0:#D5CED9">];</span></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">    </span></span><span style="--0:#00E8C6;--1:#F8F8F2">time</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">+=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">:</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">  </span></span><span style="--0:#D5CED9;--1:#F8F8F2">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">  </span></span><span style="--0:#00E8C6;--1:#F8F8F2">time</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">+=</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">s</span><span style="--0:#D5CED9">[</span><span style="--0:#00E8C6">i</span><span style="--0:#D5CED9">].</span><span style="--0:#00E8C6">length</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">===</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F39C12;--1:#BD93F9">1</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">?</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">0</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">+</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">s</span><span style="--0:#D5CED9">[</span><span style="--0:#00E8C6">i</span><span style="--0:#D5CED9">] </span></span><span style="--0:#F17963;--1:#FF79C6">:</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">s</span><span style="--0:#D5CED9">[</span><span style="--0:#00E8C6">i</span><span style="--0:#D5CED9">];</span></span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">return</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">time</span><span style="--0:#D5CED9">;</span></span></div></div><div class="ec-line"><div class="code"><span style="--0:#D5CED9;--1:#F8F8F2">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D477F1;--1:#FF79C6">export</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#D477F1;--1:#FF79C6">const</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">Audio</span><span style="--0:#F17963;--1:#FF79C6">:</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#8BE9FD;--1fs:italic">React</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#FFE66D;--1:#8BE9FD;--1fs:italic">FC</span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;</span><span style="--0:#D477F1;--1:#8BE9FD;--1fs:italic">any</span><span style="--0:#D5CED9;--1:#F8F8F2">> </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#00E8C6;--1:#FFB86C;--1fs:italic">props</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#D477F1;--1:#FF79C6">=></span><span style="--0:#D5CED9;--1:#F8F8F2"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">const</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> { </span><span style="--0:#00E8C6">src</span><span style="--0:#D5CED9">, </span><span style="--0:#00E8C6">width</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">80%</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">, </span><span style="--0:#00E8C6">height</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">30px</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2"> } </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">props</span><span style="--0:#D5CED9">;</span></span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">const</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">audioRef</span><span style="--0:#D5CED9">                      </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">useRef</span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;</span><span style="--0:#FFE66D;--1:#FFB86C;--1fs:italic">HTMLAudioElement</span><span style="--0:#D5CED9;--1:#F8F8F2">>(</span><span style="--0:#F17963;--1:#BD93F9">null</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">const</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">barBgRef</span><span style="--0:#D5CED9">                      </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">useRef</span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;</span><span style="--0:#FFE66D;--1:#FFB86C;--1fs:italic">HTMLDivElement</span><span style="--0:#D5CED9;--1:#F8F8F2">>(</span><span style="--0:#F17963;--1:#BD93F9">null</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">const</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">barRef</span><span style="--0:#D5CED9">                        </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">useRef</span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;</span><span style="--0:#FFE66D;--1:#FFB86C;--1fs:italic">HTMLDivElement</span><span style="--0:#D5CED9;--1:#F8F8F2">>(</span><span style="--0:#F17963;--1:#BD93F9">null</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">const</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">dotRef</span><span style="--0:#D5CED9">                        </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">useRef</span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;</span><span style="--0:#FFE66D;--1:#FFB86C;--1fs:italic">HTMLSpanElement</span><span style="--0:#D5CED9;--1:#F8F8F2">>(</span><span style="--0:#F17963;--1:#BD93F9">null</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">const</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">uidRef</span><span style="--0:#D5CED9">                        </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">useRef</span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;</span><span style="--0:#D477F1;--1:#8BE9FD;--1fs:italic">string</span><span style="--0:#D5CED9;--1:#F8F8F2">>(</span><span style="--0:#FFE66D;--1:#50FA7B">uniqueId</span><span style="--0:#D5CED9;--1:#F8F8F2">());</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">const</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> [</span><span style="--0:#00E8C6">toggle</span><span style="--0:#D5CED9">, </span><span style="--0:#00E8C6">setToggle</span><span style="--0:#D5CED9">]           </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">useState</span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;</span><span style="--0:#D477F1;--1:#8BE9FD;--1fs:italic">boolean</span><span style="--0:#D5CED9;--1:#F8F8F2">>(</span><span style="--0:#F17963;--1:#BD93F9">true</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">const</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> [</span><span style="--0:#00E8C6">progress</span><span style="--0:#D5CED9">, </span><span style="--0:#00E8C6">setProgress</span><span style="--0:#D5CED9">]       </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">useState</span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;</span><span style="--0:#D477F1;--1:#8BE9FD;--1fs:italic">number</span><span style="--0:#D5CED9;--1:#F8F8F2">>(</span><span style="--0:#F39C12;--1:#BD93F9">0</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">const</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> [</span><span style="--0:#00E8C6">duration</span><span style="--0:#D5CED9">, </span><span style="--0:#00E8C6">setDuration</span><span style="--0:#D5CED9">]       </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">useState</span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;</span><span style="--0:#D477F1;--1:#8BE9FD;--1fs:italic">string</span><span style="--0:#D5CED9;--1:#F8F8F2">>(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">00 : 00</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">const</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> [</span><span style="--0:#00E8C6">currentTime</span><span style="--0:#D5CED9">, </span><span style="--0:#00E8C6">setCurrentTime</span><span style="--0:#D5CED9">] </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">useState</span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;</span><span style="--0:#D477F1;--1:#8BE9FD;--1fs:italic">string</span><span style="--0:#D5CED9;--1:#F8F8F2">>(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">00:00</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#FFE66D;--1:#50FA7B">useLayoutEffect</span><span style="--0:#D5CED9;--1:#F8F8F2">(() </span><span style="--0:#D477F1;--1:#FF79C6">=></span><span style="--0:#D5CED9;--1:#F8F8F2"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#D477F1;--1:#FF79C6">if</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> (</span><span style="--0:#F39C12">audioRef</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">current</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">&#x26;&#x26;</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">src</span><span style="--0:#D5CED9">) {</span></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">      </span></span><span style="--0:#F39C12;--1:#F8F8F2">audioRef</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">current</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#FFE66D;--1:#50FA7B">addEventListener</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">play</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">, (</span><span style="--0:#00E8C6;--1:#FFB86C;--1fs:italic">e</span><span style="--0:#F17963;--1:#FF79C6">:</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#8BE9FD;--1fs:italic">Event</span><span style="--0:#D5CED9;--1:#F8F8F2">) </span><span style="--0:#D477F1;--1:#FF79C6">=></span><span style="--0:#D5CED9;--1:#F8F8F2"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#D477F1;--1:#FF79C6">const</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">pid</span><span style="--0:#D5CED9">    </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> (</span><span style="--0:#F39C12">e</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">target</span><span style="--0:#D5CED9"> </span></span><span style="--0:#D477F1;--1:#FF79C6">as</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#8BE9FD;--1fs:italic">HTMLAudioElement</span><span style="--0:#D5CED9;--1:#F8F8F2">).</span><span style="--0:#FFE66D;--1:#50FA7B">getAttribute</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">pid</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#D477F1;--1:#FF79C6">const</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">audios</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">document</span><span style="--0:#D5CED9">.</span></span><span style="--0:#FFE66D;--1:#50FA7B">querySelectorAll</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">audio</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">        </span></span><span style="--0:#F39C12;--1:#F8F8F2">console</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#FFE66D;--1:#50FA7B">log</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">pid</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">, </span><span style="--0:#00E8C6">pid</span><span style="--0:#D5CED9">);</span></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">        </span></span><span style="--0:#F39C12;--1:#F8F8F2">audios</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#FFE66D;--1:#50FA7B">forEach</span><span style="--0:#D5CED9;--1:#F8F8F2">((</span><span style="--0:#00E8C6;--1:#FFB86C;--1fs:italic">element</span><span style="--0:#D5CED9;--1:#F8F8F2">, </span><span style="--0:#00E8C6;--1:#FFB86C;--1fs:italic">index</span><span style="--0:#D5CED9;--1:#F8F8F2">) </span><span style="--0:#D477F1;--1:#FF79C6">=></span><span style="--0:#D5CED9;--1:#F8F8F2"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#D477F1;--1:#FF79C6">if</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> (</span><span style="--0:#F39C12">element</span><span style="--0:#D5CED9">.</span></span><span style="--0:#FFE66D;--1:#50FA7B">getAttribute</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">pid</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">) </span><span style="--0:#F17963;--1:#FF79C6">===</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">pid</span><span style="--0:#D5CED9">) </span></span><span style="--0:#D477F1;--1:#FF79C6">return</span><span style="--0:#D5CED9;--1:#F8F8F2">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">          </span></span><span style="--0:#F39C12;--1:#F8F8F2">element</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#FFE66D;--1:#50FA7B">pause</span><span style="--0:#D5CED9;--1:#F8F8F2">();</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">        </span></span><span style="--0:#D5CED9;--1:#F8F8F2">});</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">      </span></span><span style="--0:#D5CED9;--1:#F8F8F2">});</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">      </span></span><span style="--0:#F39C12;--1:#F8F8F2">audioRef</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">current</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#FFE66D;--1:#50FA7B">addEventListener</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">loadedmetadata</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">, </span><span style="--0:#00E8C6;--1:#FFB86C;--1fs:italic">e</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#D477F1;--1:#FF79C6">=></span><span style="--0:#D5CED9;--1:#F8F8F2"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#D477F1;--1:#FF79C6">const</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">duration</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">transTime</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">          </span></span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#F39C12;--1:#F8F8F2">e</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">target</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#D477F1;--1:#FF79C6">as</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#8BE9FD;--1fs:italic">HTMLAudioElement</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">).</span><span style="--0:#00E8C6">duration</span><span style="--0:#D5CED9"> </span></span><span style="--0:#D477F1;--1:#FF79C6">as</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#D477F1;--1:#8BE9FD;--1fs:italic">number</span><span style="--0:#D5CED9;--1:#F8F8F2">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">        </span></span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FFE66D;--1:#50FA7B">setDuration</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">(</span><span style="--0:#00E8C6">duration</span><span style="--0:#D5CED9">);</span></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">      </span></span><span style="--0:#D5CED9;--1:#F8F8F2">});</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">      </span></span><span style="--0:#F39C12;--1:#F8F8F2">audioRef</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">current</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#FFE66D;--1:#50FA7B">addEventListener</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">play</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">, </span><span style="--0:#00E8C6;--1:#FFB86C;--1fs:italic">_res</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#D477F1;--1:#FF79C6">=></span><span style="--0:#D5CED9;--1:#F8F8F2"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FFE66D;--1:#50FA7B">setToggle</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#F17963;--1:#BD93F9">false</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">      </span></span><span style="--0:#D5CED9;--1:#F8F8F2">});</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">      </span></span><span style="--0:#F39C12;--1:#F8F8F2">audioRef</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">current</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#FFE66D;--1:#50FA7B">addEventListener</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">pause</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">, () </span><span style="--0:#D477F1;--1:#FF79C6">=></span><span style="--0:#D5CED9;--1:#F8F8F2"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FFE66D;--1:#50FA7B">setToggle</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#F17963;--1:#BD93F9">true</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">      </span></span><span style="--0:#D5CED9;--1:#F8F8F2">});</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">      </span></span><span style="--0:#F39C12;--1:#F8F8F2">audioRef</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">current</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#FFE66D;--1:#50FA7B">addEventListener</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">timeupdate</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">, </span><span style="--0:#00E8C6;--1:#FFB86C;--1fs:italic">e</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#D477F1;--1:#FF79C6">=></span><span style="--0:#D5CED9;--1:#F8F8F2"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#D477F1;--1:#FF79C6">let</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">value</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">=</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">          </span></span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#F39C12;--1:#F8F8F2">e</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">target</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#D477F1;--1:#FF79C6">as</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#8BE9FD;--1fs:italic">HTMLAudioElement</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">).</span><span style="--0:#00E8C6">currentTime</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">/</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">          </span></span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#F39C12;--1:#F8F8F2">audioRef</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">current</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#D477F1;--1:#FF79C6">as</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#8BE9FD;--1fs:italic">HTMLAudioElement</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">).</span><span style="--0:#00E8C6">duration</span><span style="--0:#D5CED9">;</span></span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FFE66D;--1:#50FA7B">setProgress</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">(</span><span style="--0:#00E8C6">value</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">*</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F39C12;--1:#BD93F9">100</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FFE66D;--1:#50FA7B">setCurrentTime</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#FFE66D;--1:#50FA7B">transTime</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">((</span><span style="--0:#F39C12">e</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">target</span><span style="--0:#D5CED9"> </span></span><span style="--0:#D477F1;--1:#FF79C6">as</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#8BE9FD;--1fs:italic">HTMLAudioElement</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">).</span><span style="--0:#00E8C6">currentTime</span><span style="--0:#D5CED9">));</span></span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#A0A1A7F4;--1:#96A1C2">// console.log('timeupdate res', res.target.currentTime);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">      </span></span><span style="--0:#D5CED9;--1:#F8F8F2">});</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">    </span></span><span style="--0:#D5CED9;--1:#F8F8F2">}</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#D477F1;--1:#FF79C6">return</span><span style="--0:#D5CED9;--1:#F8F8F2"> () </span><span style="--0:#D477F1;--1:#FF79C6">=></span><span style="--0:#D5CED9;--1:#F8F8F2"> {};</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">  </span></span><span style="--0:#D5CED9;--1:#F8F8F2">}, [</span><span style="--0:#00E8C6;--1:#F8F8F2">src</span><span style="--0:#D5CED9;--1:#F8F8F2">]);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#FFE66D;--1:#50FA7B">useEffect</span><span style="--0:#D5CED9;--1:#F8F8F2">(() </span><span style="--0:#D477F1;--1:#FF79C6">=></span><span style="--0:#D5CED9;--1:#F8F8F2"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#D477F1;--1:#FF79C6">if</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> (</span><span style="--0:#F39C12">dotRef</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">current</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">&#x26;&#x26;</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">src</span><span style="--0:#D5CED9">) {</span></span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#D477F1;--1:#FF79C6">const</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">position</span><span style="--0:#D5CED9">  </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">        </span></span><span style="--0:#D5CED9;--1:#F8F8F2">oriOffestLeft </span><span style="--0:#D5CED9;--1:#FF79C6">:</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F39C12;--1:#BD93F9">0</span><span style="--0:#D5CED9;--1:#F8F8F2">, </span><span style="--0:#A0A1A7F4;--1:#96A1C2">// 移动开始时进度条的点距离进度条的偏移值</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">        </span></span><span style="--0:#D5CED9;--1:#F8F8F2">oriX          </span><span style="--0:#D5CED9;--1:#FF79C6">:</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F39C12;--1:#BD93F9">0</span><span style="--0:#D5CED9;--1:#F8F8F2">, </span><span style="--0:#A0A1A7F4;--1:#96A1C2">// 移动开始时的x坐标</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">        </span></span><span style="--0:#D5CED9;--1:#F8F8F2">maxLeft       </span><span style="--0:#D5CED9;--1:#FF79C6">:</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F39C12;--1:#BD93F9">0</span><span style="--0:#D5CED9;--1:#F8F8F2">, </span><span style="--0:#A0A1A7F4;--1:#96A1C2">// 向左最大可拖动距离</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">        </span></span><span style="--0:#D5CED9;--1:#F8F8F2">maxRight      </span><span style="--0:#D5CED9;--1:#FF79C6">:</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F39C12;--1:#BD93F9">0</span><span style="--0:#D5CED9;--1:#F8F8F2">, </span><span style="--0:#A0A1A7F4;--1:#96A1C2">// 向右最大可拖动距离</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">      </span></span><span style="--0:#D5CED9;--1:#F8F8F2">};</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#D477F1;--1:#FF79C6">let</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">flag</span><span style="--0:#D5CED9">        </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#BD93F9">false</span><span style="--0:#D5CED9;--1:#F8F8F2">; </span><span style="--0:#A0A1A7F4;--1:#96A1C2">// 标记是否拖动开始</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#A0A1A7F4;--1:#96A1C2">// 按下</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#D477F1;--1:#FF79C6">const</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">down</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> (</span><span style="--0:#00E8C6;--1:#FFB86C;--1fs:italic">event</span><span style="--0:#F17963;--1:#FF79C6">:</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#8BE9FD;--1fs:italic">TouchEvent</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">|</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#8BE9FD;--1fs:italic">MouseEvent</span><span style="--0:#D5CED9;--1:#F8F8F2">) </span><span style="--0:#D477F1;--1:#FF79C6">=></span><span style="--0:#D5CED9;--1:#F8F8F2"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#D477F1;--1:#FF79C6">if</span><span style="--0:#D5CED9;--1:#F8F8F2"> (</span><span style="--0:#F17963;--1:#FF79C6">!</span><span style="--1:#F8F8F2"><span style="--0:#F39C12">audioRef</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">current</span><span style="--0:#D5CED9">?.</span><span style="--0:#00E8C6">paused</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">||</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">audioRef</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">current</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">currentTime</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">!==</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F39C12;--1:#BD93F9">0</span><span style="--0:#D5CED9;--1:#F8F8F2">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">          </span></span><span style="--0:#00E8C6;--1:#F8F8F2">flag</span><span style="--0:#D5CED9;--1:#F8F8F2">                   </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#BD93F9">true</span><span style="--0:#D5CED9;--1:#F8F8F2">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">          </span></span><span style="--0:#F39C12;--1:#F8F8F2">position</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">oriOffestLeft</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">dotRef</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">current</span><span style="--0:#D5CED9">?.</span><span style="--0:#00E8C6">offsetLeft</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">??</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F39C12;--1:#BD93F9">0</span><span style="--0:#D5CED9;--1:#F8F8F2">; </span><span style="--0:#A0A1A7F4;--1:#96A1C2">// 初始位置</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">          </span></span><span style="--0:#F39C12;--1:#F8F8F2">position</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">oriX</span><span style="--0:#D5CED9;--1:#F8F8F2">          </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">position</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">oriX</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">=</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">            </span></span><span style="--0:#00E8C6;--1:#F8F8F2">event</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">instanceof</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#8BE9FD;--1fs:italic">TouchEvent</span></div></div><div class="ec-line"><div class="code"><span class="indent">              </span><span style="--0:#F17963;--1:#FF79C6">?</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">event</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">touches</span><span style="--0:#D5CED9">[</span></span><span style="--0:#F39C12;--1:#BD93F9">0</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">].</span><span style="--0:#00E8C6">clientX</span></span></div></div><div class="ec-line"><div class="code"><span class="indent">                                 </span><span style="--0:#F17963;--1:#FF79C6">:</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">event</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">clientX</span><span style="--0:#D5CED9">; </span></span><span style="--0:#A0A1A7F4;--1:#96A1C2">// 要同时适配mousedown和touchstart事件</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">          </span></span><span style="--0:#F39C12;--1:#F8F8F2">position</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">maxLeft</span><span style="--0:#D5CED9;--1:#F8F8F2">       </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">position</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">oriOffestLeft</span><span style="--0:#D5CED9">; </span></span><span style="--0:#A0A1A7F4;--1:#96A1C2">// 向左最大可拖动距离</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">          </span></span><span style="--0:#F39C12;--1:#F8F8F2">position</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">maxRight</span><span style="--0:#D5CED9;--1:#F8F8F2">      </span><span style="--0:#F17963;--1:#FF79C6">=</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">            </span></span><span style="--0:#F39C12;--1:#F8F8F2">barBgRef</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">current</span><span style="--0:#D5CED9;--1:#F8F8F2">?.</span><span style="--0:#00E8C6;--1:#F8F8F2">offsetWidth</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">??</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F39C12;--1:#BD93F9">0</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">-</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">position</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">oriOffestLeft</span><span style="--0:#D5CED9">; </span></span><span style="--0:#A0A1A7F4;--1:#96A1C2">// 向右边最大可拖动距离</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#D477F1;--1:#FF79C6">if</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> (</span><span style="--0:#00E8C6">event</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">&#x26;&#x26;</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">event</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">preventDefault</span><span style="--0:#D5CED9">) {</span></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">            </span></span><span style="--0:#F39C12;--1:#F8F8F2">event</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#FFE66D;--1:#50FA7B">preventDefault</span><span style="--0:#D5CED9;--1:#F8F8F2">();</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">          </span></span><span style="--0:#D5CED9;--1:#F8F8F2">} </span><span style="--0:#D477F1;--1:#FF79C6">else</span><span style="--0:#D5CED9;--1:#F8F8F2"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">            </span></span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#00E8C6;--1:#F8F8F2">event</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#D477F1;--1:#FF79C6">as</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#8BE9FD;--1fs:italic">TouchEvent</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">).</span><span style="--0:#00E8C6">returnValue</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#BD93F9">false</span><span style="--0:#D5CED9;--1:#F8F8F2">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">          </span></span><span style="--0:#D5CED9;--1:#F8F8F2">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#A0A1A7F4;--1:#96A1C2">// 禁止事件冒泡</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#D477F1;--1:#FF79C6">if</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> (</span><span style="--0:#00E8C6">event</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">&#x26;&#x26;</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">event</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">stopPropagation</span><span style="--0:#D5CED9">) {</span></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">            </span></span><span style="--0:#F39C12;--1:#F8F8F2">event</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#FFE66D;--1:#50FA7B">stopPropagation</span><span style="--0:#D5CED9;--1:#F8F8F2">();</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">          </span></span><span style="--0:#D5CED9;--1:#F8F8F2">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">        </span></span><span style="--0:#D5CED9;--1:#F8F8F2">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">      </span></span><span style="--0:#D5CED9;--1:#F8F8F2">};</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#A0A1A7F4;--1:#96A1C2">// 移动</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#D477F1;--1:#FF79C6">const</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">move</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> (</span><span style="--0:#00E8C6;--1:#FFB86C;--1fs:italic">event</span><span style="--0:#F17963;--1:#FF79C6">:</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#8BE9FD;--1fs:italic">TouchEvent</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">|</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#8BE9FD;--1fs:italic">MouseEvent</span><span style="--0:#D5CED9;--1:#F8F8F2">) </span><span style="--0:#D477F1;--1:#FF79C6">=></span><span style="--0:#D5CED9;--1:#F8F8F2"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#D477F1;--1:#FF79C6">if</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> (</span><span style="--0:#00E8C6">flag</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">&#x26;&#x26;</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">barBgRef</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">current</span><span style="--0:#D5CED9">) {</span></span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#D477F1;--1:#FF79C6">let</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">clientX</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">=</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">                        </span></span><span style="--0:#00E8C6;--1:#F8F8F2">event</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">instanceof</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#8BE9FD;--1fs:italic">TouchEvent</span></div></div><div class="ec-line"><div class="code"><span class="indent">                        </span><span style="--0:#F17963;--1:#FF79C6">?</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">event</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">touches</span><span style="--0:#D5CED9">[</span></span><span style="--0:#F39C12;--1:#BD93F9">0</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">].</span><span style="--0:#00E8C6">clientX</span></span></div></div><div class="ec-line"><div class="code"><span class="indent">                        </span><span style="--0:#F17963;--1:#FF79C6">:</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">event</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">clientX</span><span style="--0:#D5CED9">; </span></span><span style="--0:#A0A1A7F4;--1:#96A1C2">// 要同时适配mousemove和touchmove事件</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#D477F1;--1:#FF79C6">let</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">length</span><span style="--0:#D5CED9">  </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">clientX</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">-</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">position</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">oriX</span><span style="--0:#D5CED9">;</span></span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#D477F1;--1:#FF79C6">if</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> (</span><span style="--0:#00E8C6">length</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">></span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">position</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">maxRight</span><span style="--0:#D5CED9">) {</span></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">            </span></span><span style="--0:#00E8C6;--1:#F8F8F2">length</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#F39C12">position</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">maxRight</span><span style="--0:#D5CED9">;</span></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">          </span></span><span style="--0:#D5CED9;--1:#F8F8F2">} </span><span style="--0:#D477F1;--1:#FF79C6">else</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#D477F1;--1:#FF79C6">if</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> (</span><span style="--0:#00E8C6">length</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">&#x3C;</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">-</span><span style="--1:#F8F8F2"><span style="--0:#F39C12">position</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">maxLeft</span><span style="--0:#D5CED9">) {</span></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">            </span></span><span style="--0:#00E8C6;--1:#F8F8F2">length</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">-</span><span style="--1:#F8F8F2"><span style="--0:#F39C12">position</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">maxLeft</span><span style="--0:#D5CED9">;</span></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">          </span></span><span style="--0:#D5CED9;--1:#F8F8F2">}</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#A0A1A7F4;--1:#96A1C2">// let pgsWidth = barBgRef.current?.offsetWidth;</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#D477F1;--1:#FF79C6">let</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">pgsWidth</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">parseFloat</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">            </span></span><span style="--0:#F39C12;--1:#F8F8F2">window</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#FFE66D;--1:#50FA7B">getComputedStyle</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">(</span><span style="--0:#F39C12">barBgRef</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">current</span><span style="--0:#D5CED9">).</span><span style="--0:#00E8C6">width</span><span style="--0:#D5CED9">.</span></span><span style="--0:#FFE66D;--1:#50FA7B">replace</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">px</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">, </span><span style="--0:#96E072;--1:#E9F284">''</span><span style="--0:#D5CED9;--1:#F8F8F2">),</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">          </span></span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#D477F1;--1:#FF79C6">let</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">rate</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> (</span><span style="--0:#F39C12">position</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">oriOffestLeft</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">+</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">length</span><span style="--0:#D5CED9">) </span></span><span style="--0:#F17963;--1:#FF79C6">/</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">pgsWidth</span><span style="--0:#D5CED9">;</span></span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">          </span></span><span style="--0:#F39C12;--1:#F8F8F2">console</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#FFE66D;--1:#50FA7B">log</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">===</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">, </span><span style="--0:#F39C12">position</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">oriOffestLeft</span><span style="--0:#D5CED9">, </span><span style="--0:#00E8C6">length</span><span style="--0:#D5CED9">);</span></span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">          </span></span><span style="--0:#F39C12;--1:#F8F8F2">console</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#FFE66D;--1:#50FA7B">log</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">偏移总长比例</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">            </span></span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#F39C12;--1:#F8F8F2">audioRef</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">current</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#D477F1;--1:#FF79C6">as</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#8BE9FD;--1fs:italic">HTMLAudioElement</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">).</span><span style="--0:#00E8C6">duration</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">*</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">rate</span><span style="--0:#D5CED9">,</span></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">            </span></span><span style="--0:#00E8C6;--1:#F8F8F2">rate</span><span style="--0:#D5CED9;--1:#F8F8F2">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">          </span></span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">          </span></span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#F39C12;--1:#F8F8F2">audioRef</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">current</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#D477F1;--1:#FF79C6">as</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#8BE9FD;--1fs:italic">HTMLAudioElement</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">).</span><span style="--0:#00E8C6">currentTime</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">=</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">            </span></span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#F39C12;--1:#F8F8F2">audioRef</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">current</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#D477F1;--1:#FF79C6">as</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#8BE9FD;--1fs:italic">HTMLAudioElement</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">).</span><span style="--0:#00E8C6">duration</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">*</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">rate</span><span style="--0:#D5CED9">;</span></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">        </span></span><span style="--0:#D5CED9;--1:#F8F8F2">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">      </span></span><span style="--0:#D5CED9;--1:#F8F8F2">};</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#A0A1A7F4;--1:#96A1C2">// 结束</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#D477F1;--1:#FF79C6">const</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">end</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> () </span><span style="--0:#D477F1;--1:#FF79C6">=></span><span style="--0:#D5CED9;--1:#F8F8F2"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">        </span></span><span style="--0:#00E8C6;--1:#F8F8F2">flag</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#BD93F9">false</span><span style="--0:#D5CED9;--1:#F8F8F2">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">      </span></span><span style="--0:#D5CED9;--1:#F8F8F2">};</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#A0A1A7F4;--1:#96A1C2">// 鼠标按下时</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">      </span></span><span style="--0:#F39C12;--1:#F8F8F2">dotRef</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">current</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#FFE66D;--1:#50FA7B">addEventListener</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">mousedown</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">, </span><span style="--0:#00E8C6">down</span><span style="--0:#D5CED9"> </span></span><span style="--0:#D477F1;--1:#FF79C6">as</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#D477F1;--1:#8BE9FD;--1fs:italic">any</span><span style="--0:#D5CED9;--1:#F8F8F2">, </span><span style="--0:#F17963;--1:#BD93F9">false</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">      </span></span><span style="--0:#F39C12;--1:#F8F8F2">dotRef</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">current</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#FFE66D;--1:#50FA7B">addEventListener</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">touchstart</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">, </span><span style="--0:#00E8C6">down</span><span style="--0:#D5CED9">, </span></span><span style="--0:#F17963;--1:#BD93F9">false</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#A0A1A7F4;--1:#96A1C2">// 开始拖动</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">      </span></span><span style="--0:#F39C12;--1:#F8F8F2">document</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#FFE66D;--1:#50FA7B">addEventListener</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">mousemove</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">, </span><span style="--0:#00E8C6">move</span><span style="--0:#D5CED9"> </span></span><span style="--0:#D477F1;--1:#FF79C6">as</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#D477F1;--1:#8BE9FD;--1fs:italic">any</span><span style="--0:#D5CED9;--1:#F8F8F2">, </span><span style="--0:#F17963;--1:#BD93F9">false</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">      </span></span><span style="--0:#F39C12;--1:#F8F8F2">document</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#FFE66D;--1:#50FA7B">addEventListener</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">touchmove</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">, </span><span style="--0:#00E8C6">move</span><span style="--0:#D5CED9">, </span></span><span style="--0:#F17963;--1:#BD93F9">false</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#A0A1A7F4;--1:#96A1C2">// 拖动结束</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">      </span></span><span style="--0:#F39C12;--1:#F8F8F2">document</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#FFE66D;--1:#50FA7B">addEventListener</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">mouseup</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">, </span><span style="--0:#00E8C6">end</span><span style="--0:#D5CED9">, </span></span><span style="--0:#F17963;--1:#BD93F9">false</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">      </span></span><span style="--0:#F39C12;--1:#F8F8F2">barBgRef</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">current</span><span style="--0:#D5CED9;--1:#F8F8F2">?.</span><span style="--0:#FFE66D;--1:#50FA7B">addEventListener</span><span style="--0:#D5CED9;--1:#F8F8F2">(</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">touchend</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">, </span><span style="--0:#00E8C6">end</span><span style="--0:#D5CED9">, </span></span><span style="--0:#F17963;--1:#BD93F9">false</span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">    </span></span><span style="--0:#D5CED9;--1:#F8F8F2">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">  </span></span><span style="--0:#D5CED9;--1:#F8F8F2">}, [</span><span style="--0:#00E8C6;--1:#F8F8F2">src</span><span style="--0:#D5CED9;--1:#F8F8F2">]);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">const</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B">handlePaly</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#D5CED9;--1:#F8F8F2"> () </span><span style="--0:#D477F1;--1:#FF79C6">=></span><span style="--0:#D5CED9;--1:#F8F8F2"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#D477F1;--1:#FF79C6">if</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> (</span><span style="--0:#00E8C6">toggle</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">&#x26;&#x26;</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">src</span><span style="--0:#D5CED9">) {</span></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">      </span></span><span style="--0:#F39C12;--1:#F8F8F2">audioRef</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">current</span><span style="--0:#D5CED9;--1:#F8F8F2">?.</span><span style="--0:#FFE66D;--1:#50FA7B">play</span><span style="--0:#D5CED9;--1:#F8F8F2">();</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#D477F1;--1:#FF79C6">return</span><span style="--0:#D5CED9;--1:#F8F8F2">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">    </span></span><span style="--0:#D5CED9;--1:#F8F8F2">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#F8F8F2">    </span></span><span style="--0:#F39C12;--1:#F8F8F2">audioRef</span><span style="--0:#D5CED9;--1:#F8F8F2">.</span><span style="--0:#00E8C6;--1:#F8F8F2">current</span><span style="--0:#D5CED9;--1:#F8F8F2">?.</span><span style="--0:#FFE66D;--1:#50FA7B">pause</span><span style="--0:#D5CED9;--1:#F8F8F2">();</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#D477F1;--1:#FF79C6">return</span><span style="--0:#D5CED9;--1:#F8F8F2">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">  </span></span><span style="--0:#D5CED9;--1:#F8F8F2">};</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D477F1;--1:#FF79C6">return</span><span style="--0:#D5CED9;--1:#F8F8F2"> (</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">    </span></span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">      </span></span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;</span><span style="--0:#FB6A9E;--1:#FF79C6">audio</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#A0A1A7F4;--1:#96A1C2">// @ts-ignore</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">pid</span><span style="--1:#FF79C6"><span style="--0:#F17963">=</span><span style="--0:#D5CED9">{</span></span><span style="--1:#F8F8F2"><span style="--0:#F39C12">uidRef</span><span style="--0:#D5CED9">.</span><span style="--0:#00E8C6">current</span></span><span style="--0:#D5CED9;--1:#FF79C6">}</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">controls</span><span style="--1:#FF79C6"><span style="--0:#F17963">=</span><span style="--0:#D5CED9">{</span></span><span style="--0:#F17963;--1:#BD93F9">false</span><span style="--0:#D5CED9;--1:#FF79C6">}</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">src</span><span style="--1:#FF79C6"><span style="--0:#F17963">=</span><span style="--0:#D5CED9">{</span></span><span style="--0:#00E8C6;--1:#F8F8F2">src</span><span style="--0:#D5CED9;--1:#FF79C6">}</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">preload</span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">metadata</span><span style="--0:#96E072;--1:#E9F284">'</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">ref</span><span style="--1:#FF79C6"><span style="--0:#F17963">=</span><span style="--0:#D5CED9">{</span></span><span style="--0:#00E8C6;--1:#F8F8F2">audioRef</span><span style="--0:#D5CED9;--1:#FF79C6">}</span><span style="--0:#D5CED9;--1:#F8F8F2">></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">        </span></span><span style="--0:#D5CED9;--1:#F8F8F2">您的浏览器不支持 audio 标签</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">      </span></span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;/</span><span style="--0:#FB6A9E;--1:#FF79C6">audio</span><span style="--0:#D5CED9;--1:#F8F8F2">></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">      </span></span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;</span><span style="--0:#FB6A9E;--1:#FF79C6">div</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">className</span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">audio-container</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">style</span><span style="--1:#FF79C6"><span style="--0:#F17963">=</span><span style="--0:#D5CED9">{</span></span><span style="--1:#F8F8F2"><span style="--0:#D5CED9">{ </span><span style="--0:#00E8C6">width</span><span style="--0:#D5CED9">, </span><span style="--0:#00E8C6">height</span><span style="--0:#D5CED9"> }</span></span><span style="--0:#D5CED9;--1:#FF79C6">}</span><span style="--0:#D5CED9;--1:#F8F8F2">></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">        </span></span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;</span><span style="--0:#FB6A9E;--1:#FF79C6">div</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">className</span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">audio-toggle</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">onClick</span><span style="--1:#FF79C6"><span style="--0:#F17963">=</span><span style="--0:#D5CED9">{</span></span><span style="--0:#00E8C6;--1:#F8F8F2">handlePaly</span><span style="--0:#D5CED9;--1:#FF79C6">}</span><span style="--0:#D5CED9;--1:#F8F8F2">></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9">          </span></span><span style="--0:#D5CED9;--1:#FF79C6">{</span><span style="--1:#F8F8F2"><span style="--0:#00E8C6">toggle</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">&#x26;&#x26;</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">src</span><span style="--0:#D5CED9"> </span></span><span style="--0:#F17963;--1:#FF79C6">?</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">></span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#F17963;--1:#FF79C6">:</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">||</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#FF79C6">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">        </span></span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;/</span><span style="--0:#FB6A9E;--1:#FF79C6">div</span><span style="--0:#D5CED9;--1:#F8F8F2">></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">        </span></span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;</span><span style="--0:#FB6A9E;--1:#FF79C6">div</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">className</span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">audio-progress-bar-bg</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">ref</span><span style="--1:#FF79C6"><span style="--0:#F17963">=</span><span style="--0:#D5CED9">{</span></span><span style="--0:#00E8C6;--1:#F8F8F2">barBgRef</span><span style="--0:#D5CED9;--1:#FF79C6">}</span><span style="--0:#D5CED9;--1:#F8F8F2">></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">          </span></span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;</span><span style="--0:#FB6A9E;--1:#FF79C6">span</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">ref</span><span style="--1:#FF79C6"><span style="--0:#F17963">=</span><span style="--0:#D5CED9">{</span></span><span style="--0:#00E8C6;--1:#F8F8F2">dotRef</span><span style="--0:#D5CED9;--1:#FF79C6">}</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">className</span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">progressDot</span><span style="--0:#96E072;--1:#E9F284">'</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">style</span><span style="--1:#FF79C6"><span style="--0:#F17963">=</span><span style="--0:#D5CED9">{</span></span><span style="--0:#D5CED9;--1:#F8F8F2">{ left</span><span style="--0:#D5CED9;--1:#FF79C6">:</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#96E072;--1:#F1FA8C">`</span><span style="--0:#FB6A9E;--1:#FF79C6">${</span><span style="--0:#00E8C6;--1:#F8F8F2">progress</span><span style="--0:#D5CED9;--1:#F1FA8C"> </span><span style="--0:#F17963;--1:#FF79C6">-</span><span style="--0:#D5CED9;--1:#F1FA8C"> </span><span style="--0:#F39C12;--1:#BD93F9">2</span><span style="--0:#FB6A9E;--1:#FF79C6">}</span><span style="--0:#96E072;--1:#F1FA8C">%`</span><span style="--0:#D5CED9;--1:#F8F8F2"> }</span><span style="--0:#D5CED9;--1:#FF79C6">}</span><span style="--0:#D5CED9;--1:#F8F8F2">>&#x3C;/</span><span style="--0:#FB6A9E;--1:#FF79C6">span</span><span style="--0:#D5CED9;--1:#F8F8F2">></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">          </span></span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;</span><span style="--0:#FB6A9E;--1:#FF79C6">div</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">ref</span><span style="--1:#FF79C6"><span style="--0:#F17963">=</span><span style="--0:#D5CED9">{</span></span><span style="--0:#00E8C6;--1:#F8F8F2">barRef</span><span style="--0:#D5CED9;--1:#FF79C6">}</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">className</span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">audio-progress-bar</span><span style="--0:#96E072;--1:#E9F284">'</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">style</span><span style="--1:#FF79C6"><span style="--0:#F17963">=</span><span style="--0:#D5CED9">{</span></span><span style="--0:#D5CED9;--1:#F8F8F2">{</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">              </span></span><span style="--0:#D5CED9;--1:#F8F8F2">width</span><span style="--0:#D5CED9;--1:#FF79C6">:</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#96E072;--1:#F1FA8C">`</span><span style="--0:#FB6A9E;--1:#FF79C6">${</span><span style="--0:#00E8C6;--1:#F8F8F2">progress</span><span style="--0:#FB6A9E;--1:#FF79C6">}</span><span style="--0:#96E072;--1:#F1FA8C">%`</span><span style="--0:#D5CED9;--1:#F8F8F2">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">            </span></span><span style="--0:#D5CED9;--1:#F8F8F2">}</span><span style="--0:#D5CED9;--1:#FF79C6">}</span><span style="--0:#D5CED9;--1:#F8F8F2">>&#x3C;/</span><span style="--0:#FB6A9E;--1:#FF79C6">div</span><span style="--0:#D5CED9;--1:#F8F8F2">></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">        </span></span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;/</span><span style="--0:#FB6A9E;--1:#FF79C6">div</span><span style="--0:#D5CED9;--1:#F8F8F2">></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">        </span></span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;</span><span style="--0:#FB6A9E;--1:#FF79C6">div</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#FFE66D;--1:#50FA7B;--1fs:italic">className</span><span style="--0:#F17963;--1:#FF79C6">=</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#96E072;--1:#F1FA8C">audio-time</span><span style="--0:#96E072;--1:#E9F284">'</span><span style="--0:#D5CED9;--1:#F8F8F2">></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9">          </span></span><span style="--0:#D5CED9;--1:#FF79C6">{</span><span style="--0:#00E8C6;--1:#F8F8F2">currentTime</span><span style="--0:#D5CED9;--1:#FF79C6">}</span><span style="--0:#D5CED9;--1:#F8F8F2">/</span><span style="--0:#D5CED9;--1:#FF79C6">{</span><span style="--0:#00E8C6;--1:#F8F8F2">duration</span><span style="--0:#D5CED9;--1:#FF79C6">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">        </span></span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;/</span><span style="--0:#FB6A9E;--1:#FF79C6">div</span><span style="--0:#D5CED9;--1:#F8F8F2">></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">      </span></span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;/</span><span style="--0:#FB6A9E;--1:#FF79C6">div</span><span style="--0:#D5CED9;--1:#F8F8F2">></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">    </span></span><span style="--0:#D5CED9;--1:#F8F8F2">&#x3C;/></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D5CED9;--1:#F8F8F2">  </span></span><span style="--0:#D5CED9;--1:#F8F8F2">);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D5CED9;--1:#F8F8F2">};</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D477F1;--1:#FF79C6">export</span><span style="--0:#D5CED9;--1:#F8F8F2"> </span><span style="--0:#D477F1;--1:#FF79C6">default</span><span style="--1:#F8F8F2"><span style="--0:#D5CED9"> </span><span style="--0:#00E8C6">Audio</span><span style="--0:#D5CED9">;</span></span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="import React, {  useRef,  useLayoutEffect,  useState,  useEffect,  MouseEvent,} from &#x27;react&#x27;;import &#x27;./Audio.css&#x27;;function transTime(value: number) {  var time = &#x27;&#x27;;  var h = parseInt(&#x60;${value / 3600}&#x60;);  value %= 3600;  var m = parseInt(&#x60;${value / 60}&#x60;);  var s = parseInt(&#x60;${value % 60}&#x60;);  if (h > 0) {    time = formatTime(h + &#x27;:&#x27; + m + &#x27;:&#x27; + s);  } else {    time = formatTime(m + &#x27;:&#x27; + s);  }  return time;}function formatTime(value: string) {  var time = &#x27;&#x27;;  var s = value.split(&#x27;:&#x27;);  var i = 0;  for (; i < s.length - 1; i++) {    time += s[i].length === 1 ? &#x27;0&#x27; + s[i] : s[i];    time += &#x27;:&#x27;;  }  time += s[i].length === 1 ? &#x27;0&#x27; + s[i] : s[i];  return time;}export const Audio: React.FC<any> = props => {  const { src, width = &#x27;80%&#x27;, height = &#x27;30px&#x27; } = props;  const audioRef                      = useRef<HTMLAudioElement>(null);  const barBgRef                      = useRef<HTMLDivElement>(null);  const barRef                        = useRef<HTMLDivElement>(null);  const dotRef                        = useRef<HTMLSpanElement>(null);  const uidRef                        = useRef<string>(uniqueId());  const [toggle, setToggle]           = useState<boolean>(true);  const [progress, setProgress]       = useState<number>(0);  const [duration, setDuration]       = useState<string>(&#x27;00 : 00&#x27;);  const [currentTime, setCurrentTime] = useState<string>(&#x27;00:00&#x27;);  useLayoutEffect(() => {    if (audioRef.current &#x26;&#x26; src) {      audioRef.current.addEventListener(&#x27;play&#x27;, (e: Event) => {        const pid    = (e.target as HTMLAudioElement).getAttribute(&#x27;pid&#x27;);        const audios = document.querySelectorAll(&#x27;audio&#x27;);        console.log(&#x27;pid&#x27;, pid);        audios.forEach((element, index) => {          if (element.getAttribute(&#x27;pid&#x27;) === pid) return;          element.pause();        });      });      audioRef.current.addEventListener(&#x27;loadedmetadata&#x27;, e => {        const duration = transTime(          (e.target as HTMLAudioElement).duration as number,        );        setDuration(duration);      });      audioRef.current.addEventListener(&#x27;play&#x27;, _res => {        setToggle(false);      });      audioRef.current.addEventListener(&#x27;pause&#x27;, () => {        setToggle(true);      });      audioRef.current.addEventListener(&#x27;timeupdate&#x27;, e => {        let value =          (e.target as HTMLAudioElement).currentTime /          (audioRef.current as HTMLAudioElement).duration;        setProgress(value * 100);        setCurrentTime(transTime((e.target as HTMLAudioElement).currentTime));        // console.log(&#x27;timeupdate res&#x27;, res.target.currentTime);      });    }    return () => {};  }, [src]);  useEffect(() => {    if (dotRef.current &#x26;&#x26; src) {      const position  = {        oriOffestLeft : 0, // 移动开始时进度条的点距离进度条的偏移值        oriX          : 0, // 移动开始时的x坐标        maxLeft       : 0, // 向左最大可拖动距离        maxRight      : 0, // 向右最大可拖动距离      };      let flag        = false; // 标记是否拖动开始      // 按下      const down = (event: TouchEvent | MouseEvent) => {        if (!audioRef.current?.paused || audioRef.current.currentTime !== 0) {          flag                   = true;          position.oriOffestLeft = dotRef.current?.offsetLeft ?? 0; // 初始位置          position.oriX          = position.oriX =            event instanceof TouchEvent              ? event.touches[0].clientX                                 : event.clientX; // 要同时适配mousedown和touchstart事件          position.maxLeft       = position.oriOffestLeft; // 向左最大可拖动距离          position.maxRight      =            barBgRef.current?.offsetWidth ?? 0 - position.oriOffestLeft; // 向右边最大可拖动距离          if (event &#x26;&#x26; event.preventDefault) {            event.preventDefault();          } else {            (event as TouchEvent).returnValue = false;          }          // 禁止事件冒泡          if (event &#x26;&#x26; event.stopPropagation) {            event.stopPropagation();          }        }      };      // 移动      const move = (event: TouchEvent | MouseEvent) => {        if (flag &#x26;&#x26; barBgRef.current) {          let clientX =                        event instanceof TouchEvent                        ? event.touches[0].clientX                        : event.clientX; // 要同时适配mousemove和touchmove事件          let length  = clientX - position.oriX;          if (length > position.maxRight) {            length = position.maxRight;          } else if (length < -position.maxLeft) {            length = -position.maxLeft;          }          // let pgsWidth = barBgRef.current?.offsetWidth;          let pgsWidth = parseFloat(            window.getComputedStyle(barBgRef.current).width.replace(&#x27;px&#x27;, &#x27;&#x27;),          );          let rate = (position.oriOffestLeft + length) / pgsWidth;          console.log(&#x27;===&#x27;, position.oriOffestLeft, length);          console.log(            &#x27;偏移总长比例&#x27;,            (audioRef.current as HTMLAudioElement).duration * rate,            rate,          );          (audioRef.current as HTMLAudioElement).currentTime =            (audioRef.current as HTMLAudioElement).duration * rate;        }      };      // 结束      const end = () => {        flag = false;      };      // 鼠标按下时      dotRef.current.addEventListener(&#x27;mousedown&#x27;, down as any, false);      dotRef.current.addEventListener(&#x27;touchstart&#x27;, down, false);      // 开始拖动      document.addEventListener(&#x27;mousemove&#x27;, move as any, false);      document.addEventListener(&#x27;touchmove&#x27;, move, false);      // 拖动结束      document.addEventListener(&#x27;mouseup&#x27;, end, false);      barBgRef.current?.addEventListener(&#x27;touchend&#x27;, end, false);    }  }, [src]);  const handlePaly = () => {    if (toggle &#x26;&#x26; src) {      audioRef.current?.play();      return;    }    audioRef.current?.pause();    return;  };  return (    <>      <audio        // @ts-ignore        pid={uidRef.current}        controls={false}        src={src}        preload=&#x27;metadata&#x27;        ref={audioRef}>        您的浏览器不支持 audio 标签      </audio>      <div className=&#x27;audio-container&#x27; style={{ width, height }}>        <div className=&#x27;audio-toggle&#x27; onClick={handlePaly}>          {toggle &#x26;&#x26; src ? &#x27;>&#x27; : &#x27;||&#x27;}        </div>        <div className=&#x27;audio-progress-bar-bg&#x27; ref={barBgRef}>          <span            ref={dotRef}            className=&#x27;progressDot&#x27;            style={{ left: &#x60;${progress - 2}%&#x60; }}></span>          <div            ref={barRef}            className=&#x27;audio-progress-bar&#x27;            style={{              width: &#x60;${progress}%&#x60;,            }}></div>        </div>        <div className=&#x27;audio-time&#x27;>          {currentTime}/{duration}        </div>      </div>    </>  );};export default Audio;"><div></div></button></div></figure></div>
<h3 id="总结">总结</h3>
<p><code>PS：原生内有个功能是下载，这里并没有实现</code></p>
<p>关于 JS 代码部分，大部分参考至这里 <a href="https://blog.csdn.net/Dandelion_drq/article/details/77645659">H5 audio 音频标签自定义样式修改以及添加播放控制事件</a></p>
<p>需求原因，原生样式似乎并不能满足产品，就会出现需要 DIY 的情况，个人参照了很多网上相关的 Blog，如有错误，敬请指教</p>
<p>感谢阅读</p>
<p><code>参考文章</code></p>
<ul>
<li><a href="https://blog.csdn.net/Dandelion_drq/article/details/77645659">H5 audio 音频标签自定义样式修改以及添加播放控制事件</a></li>
<li><a href="https://www.zhangxinxu.com/wordpress/2019/07/html-audio-api-guide/">HTML audio基础API完全使用指南</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/audio">MDN <audio></audio></a></li>
</ul>
<hr> </article> </main> <div class="random"> <div class="w-full h-1 bg-gray-600 mb-4 dark:bg-gray-300"></div> <h1 class="mb-4 text-xl font-heading font-bold text-zinc-900 dark:text-zinc-100">
Random Read
</h1> <ul class="flex flex-col gap-1.5"> <li> <a href="/posts/amap-js-api-summary" class="group flex justify-between gap-3 text-sm" data-umami-event="Random-article"> <span class="group-hover:underline">高德地图JS_api小总结</span> <span class="text-nowrap text-zinc-500 font-mono"> 2018-03-29 </span> </a> </li><li> <a href="/posts/2026-01-17-read" class="group flex justify-between gap-3 text-sm" data-umami-event="Random-article"> <span class="group-hover:underline">Read -《大力出奇迹》</span> <span class="text-nowrap text-zinc-500 font-mono"> 2026-01-17 </span> </a> </li><li> <a href="/posts/audio-diy-style" class="group flex justify-between gap-3 text-sm" data-umami-event="Random-article"> <span class="group-hover:underline">关于 Audio 自定义样式</span> <span class="text-nowrap text-zinc-500 font-mono"> 2021-03-05 </span> </a> </li> </ul> </div>  <script data-astro-rerun>
    (() => {
      if (window.__lightboxInstalled) return;
      window.__lightboxInstalled = true;

      const prefersReduced = window.matchMedia?.("(prefers-reduced-motion: reduce)")?.matches;
      const D = prefersReduced ? 0 : 180;
      const state = { overlay: null };

      const close = () => {
        const overlay = state.overlay;
        if (!overlay) return;
        const img = overlay.querySelector(".lightbox-img");

        const fade = overlay.animate([{ opacity: 1 }, { opacity: 0 }], { duration: D, easing: "ease-in", fill: "forwards" });
        const shrink = img?.animate([{ transform: "scale(1)" }, { transform: "scale(0.96)" }], { duration: D, easing: "ease-in", fill: "forwards" });

        Promise.allSettled([fade?.finished ?? Promise.resolve(), shrink?.finished ?? Promise.resolve()]).finally(() => {
          overlay.remove();
          state.overlay = null;
          document.body.style.overflow = "";
          document.body.style.paddingRight = "";
          document.removeEventListener("keydown", onKeydown);
        });
      };

      const onKeydown = (e) => { if (e.key === "Escape") close(); };

      const openFrom = (thumb) => {
        if (state.overlay) return;

        const overlay = document.createElement("div");
        overlay.className = "lightbox-overlay";
        overlay.dataset.armed = "0";
        setTimeout(() => { if (overlay.isConnected) overlay.dataset.armed = "1"; }, D || 120);

        const big = thumb.cloneNode(true);
        big.classList.add("lightbox-img");
        big.removeAttribute("width");
        big.removeAttribute("height");
        big.style.maxWidth = "";
        big.style.maxHeight = "";
        big.draggable = false;

        overlay.appendChild(big);
        document.body.appendChild(overlay);
        state.overlay = overlay;

        const pad = window.innerWidth - document.documentElement.clientWidth;
        if (pad > 0) document.body.style.paddingRight = pad + "px";
        document.body.style.overflow = "hidden";

        overlay.animate([{ opacity: 0 }, { opacity: 1 }], { duration: D, easing: "ease-out", fill: "forwards" });
        big.animate([{ transform: "scale(0.96)" }, { transform: "scale(1)" }], { duration: D, easing: "ease-out", fill: "forwards" });

        overlay.addEventListener("click", () => { if (overlay?.dataset.armed === "1") close(); });
        document.addEventListener("keydown", onKeydown);
      };

      const onDocClick = (e) => {
        const target = e.target;
        if (!(target instanceof Element)) return;
        const article = target.closest("article[data-pagefind-body]");
        if (!article) return;
        const img = target.closest("img");
        if (!img) return;
        if (e.metaKey || e.ctrlKey || e.shiftKey || e.altKey) return;

        e.preventDefault();
        e.stopPropagation();
        openFrom(img);
      };

      document.addEventListener("click", onDocClick, { passive: false });
      document.addEventListener("astro:before-swap", close);
    })();
  </script>   </div> <script>
  function setTheme() {
    let theme

    if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
      theme = localStorage.getItem('theme')
    } else {
      theme = window.matchMedia('(prefers-color-scheme: dark)').matches
        ? 'dark'
        : 'light'
    }

    document.documentElement.classList[theme ? 'add' : 'remove'](theme)

    if (typeof localStorage !== 'undefined') {
      const observer = new MutationObserver(() => {
        const isDark = document.documentElement.classList.contains('dark')
        localStorage.setItem('theme', isDark ? 'dark' : 'light')
      })
      observer.observe(document.documentElement, {
        attributes: true,
        attributeFilter: ['class'],
      })
    }
  }

  setTheme()

  document.addEventListener('astro:after-swap', setTheme)
</script></body></html>